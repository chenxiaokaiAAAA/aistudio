
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>抖音订单手动录入</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h4>抖音订单手动录入</h4>
                    </div>
                    <div class="card-body">
                        <form id="douyinOrderForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">订单号 *</label>
                                        <input type="text" class="form-control" name="order_id" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">订单金额 *</label>
                                        <input type="number" class="form-control" name="total_amount" step="0.01" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">买家姓名 *</label>
                                        <input type="text" class="form-control" name="customer_name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">买家电话 *</label>
                                        <input type="tel" class="form-control" name="customer_phone" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">商品名称 *</label>
                                        <input type="text" class="form-control" name="product_name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">商品尺寸</label>
                                        <input type="text" class="form-control" name="size">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">收货人</label>
                                        <input type="text" class="form-control" name="receiver_name">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">订单状态</label>
                                        <select class="form-select" name="status">
                                            <option value="pending">待处理</option>
                                            <option value="processing">处理中</option>
                                            <option value="shipped">已发货</option>
                                            <option value="completed">已完成</option>
                                            <option value="cancelled">已取消</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">收货地址</label>
                                <textarea class="form-control" name="shipping_address" rows="2"></textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">备注</label>
                                <textarea class="form-control" name="remark" rows="2"></textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">图片URL</label>
                                <input type="url" class="form-control" name="image_url">
                            </div>
                            
                            <button type="submit" class="btn btn-primary">添加订单</button>
                            <button type="reset" class="btn btn-secondary">重置</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5>录入说明</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li><strong>订单号：</strong>抖音小店后台的订单编号</li>
                            <li><strong>订单金额：</strong>订单总金额（元）</li>
                            <li><strong>买家信息：</strong>从抖音订单详情获取</li>
                            <li><strong>商品信息：</strong>商品名称和尺寸</li>
                            <li><strong>收货信息：</strong>收货人和地址</li>
                            <li><strong>图片URL：</strong>商品图片链接（可选）</li>
                        </ul>
                        
                        <div class="alert alert-info">
                            <strong>提示：</strong>
                            <br>• 标有 * 的字段为必填项
                            <br>• 订单号不能重复
                            <br>• 图片URL需要是可访问的链接
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('douyinOrderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            fetch('/api/douyin/manual/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    alert('订单添加成功！');
                    this.reset();
                } else {
                    alert('添加失败：' + result.message);
                }
            })
            .catch(error => {
                alert('网络错误：' + error.message);
            });
        });
    </script>
</body>
</html>
    