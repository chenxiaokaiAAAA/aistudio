<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编辑商家 - 管理后台</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/admin/dashboard">管理后台</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/logout">退出登录</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3>编辑商家</h3>
            <a href="{{ url_for('merchant_details', merchant_id=merchant.id) }}" class="btn btn-secondary">返回</a>
        </div>

        <div class="card">
            <div class="card-body">
                <form method="POST" class="row g-3">
                    <!-- 基本信息 -->
                    <div class="col-12">
                        <h5 class="text-primary">基本信息</h5>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">商家名称</label>
                        <input name="username" class="form-control" value="{{ merchant.username }}" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">分佣比例（0-1）</label>
                        <input name="commission_rate" type="number" step="0.01" min="0" max="1" class="form-control" value="{{ merchant.commission_rate }}" required>
                    </div>
                    
                    <!-- 联系方式 -->
                    <div class="col-12 mt-4">
                        <h5 class="text-primary">联系方式</h5>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">联系人</label>
                        <input name="contact_person" class="form-control" value="{{ merchant.contact_person or '' }}">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">联系电话</label>
                        <input name="contact_phone" class="form-control" value="{{ merchant.contact_phone or '' }}">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">微信号</label>
                        <input name="wechat_id" class="form-control" value="{{ merchant.wechat_id or '' }}">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">合作时间</label>
                        <input name="cooperation_date" type="date" class="form-control" value="{{ merchant.cooperation_date.strftime('%Y-%m-%d') if merchant.cooperation_date else '' }}">
                    </div>
                    
                    <!-- 地址信息 -->
                    <div class="col-12 mt-4">
                        <h5 class="text-primary">地址信息</h5>
                    </div>
                    <div class="col-12">
                        <label class="form-label">商家地址</label>
                        <textarea name="merchant_address" class="form-control" rows="3">{{ merchant.merchant_address or '' }}</textarea>
                    </div>
                    
                    <!-- 银行信息 -->
                    <div class="col-12 mt-4">
                        <h5 class="text-primary">银行信息</h5>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">账户名</label>
                        <input name="account_name" class="form-control" value="{{ merchant.account_name or '' }}">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">银行卡号</label>
                        <input name="account_number" class="form-control" value="{{ merchant.account_number or '' }}">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">开户行</label>
                        <input name="bank_name" class="form-control" value="{{ merchant.bank_name or '' }}">
                    </div>
                    
                    
                    <div class="col-12 mt-4">
                        <button class="btn btn-primary" type="submit">保存</button>
                    </div>
                </form>

                <hr>
                <form method="POST" action="{{ url_for('delete_merchant', merchant_id=merchant.id) }}" onsubmit="return confirm('删除后该商家账号将不可登录，名下订单的商家信息会被清空。确认删除？');">
                    <button class="btn btn-outline-danger" type="submit">删除商家</button>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
</body>
</html>




