# 功能删除总结

## 已删除的功能

### 1. 预约拍照功能 ✅
**删除的路由**：
- `/api/photo-signup/submit` - 提交预约
- `/api/photo-signup/list` - 获取预约列表
- `/api/photo-signup/<id>/update-status` - 更新状态
- `/api/photo-signup/<id>/delete` - 删除预约
- `/api/photo-signup/export` - 导出预约数据
- `/api/admin/init-photo-signup-table` - 初始化表
- `/admin/photo-signups` - 管理页面（在admin.py中）

**修改的文件**：
- `test_server.py` - 已注释所有预约拍照路由
- `app/routes/admin.py` - 已删除管理页面路由

---

### 2. 推广管理功能 ✅
**删除的路由**：
- `/admin/promotion` - 推广管理页面
- `/api/admin/promotion/commissions` - 获取分佣记录列表
- `/api/admin/promotion/users` - 获取推广用户列表
- `/api/admin/promotion/user/own-orders` - 获取用户自己的订单
- `/api/admin/promotion/visits/detail` - 获取访问详情
- `/api/admin/promotion/visits` - 获取访问统计
- `/api/admin/promotion/commission/<id>` - 获取佣金详情
- `/api/admin/promotion/commission/<id>/status` - 更新佣金状态
- `/api/admin/promotion/commission/<id>` - 删除佣金
- `/api/admin/promotion/user/<user_id>` - 删除推广用户
- `/api/admin/promotion/withdrawals` - 获取提现列表
- `/api/admin/promotion/withdrawal/<id>` - 获取提现详情
- `/api/admin/promotion/withdrawal/<id>/review` - 审核提现
- `/api/admin/promotion/withdrawal/<id>` - 删除提现

**小程序相关路由**：
- `/api/miniprogram/withdrawal/apply` - 申请提现
- `/api/miniprogram/promotion-code` - 获取推广码

**修改的文件**：
- `test_server.py` - 已注释所有推广管理路由
- `app/routes/admin.py` - 已删除管理页面路由

---

### 3. 作品展示功能 ✅
**删除的路由**：
- `/api/works/gallery` - 获取作品展示数据API
- `/api/admin/works-gallery` (GET) - 管理员获取作品列表
- `/api/admin/works-gallery` (POST) - 创建作品
- `/api/admin/works-gallery/<id>` (PUT) - 更新作品
- `/api/admin/works-gallery/<id>` (DELETE) - 删除作品
- `/api/admin/works-gallery/reorder` - 重新排序作品
- `/works-gallery` - 作品展示页面
- `/admin/works-gallery` - 管理页面

**修改的文件**：
- `test_server.py` - 已注释所有作品展示路由
- `app/routes/base.py` - 已删除作品展示页面路由
- `app/routes/admin.py` - 已删除管理页面路由

---

## 注意事项

1. **函数体保留**：由于代码量很大，路由装饰器已注释，但函数体代码仍然存在。这些函数不会被调用，但可以保留以便将来需要时恢复。

2. **数据库模型**：数据库模型（PhotoSignup, PromotionUser, Commission, Withdrawal, WorksGallery等）仍然存在于 `app/models.py` 中，但不会被使用。如果需要完全清理，可以删除这些模型。

3. **模板文件**：相关的HTML模板文件（如 `templates/admin/promotion_management.html`、`templates/admin/works_gallery.html` 等）仍然存在，但不会被访问。

4. **依赖关系**：如果其他代码引用了这些功能，可能会出错。需要检查并清理相关引用。

---

## 后续建议

1. **完全删除函数体**：如果需要完全清理代码，可以删除所有已注释路由对应的函数体。

2. **删除数据库模型**：如果确定不再使用，可以从 `app/models.py` 中删除相关模型类。

3. **删除模板文件**：可以删除不再使用的HTML模板文件。

4. **清理导入**：检查并删除不再使用的导入语句。

5. **测试**：运行应用确保没有引用错误。

---

生成时间: 2025-01-15

