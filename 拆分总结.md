# Flask应用拆分总结

## 已拆分的模块（共17个蓝图）

### 1. 基础路由模块 ✅
- **文件**: `app/routes/base.py`
- **蓝图**: `base_bp`
- **路由**: 首页、作品展示等基础页面

### 2. 认证路由模块 ✅
- **文件**: `app/routes/auth.py`
- **蓝图**: `auth_bp`
- **路由**: 登录、登出

### 3. 管理后台路由模块 ✅
- **文件**: `app/routes/admin.py`
- **蓝图**: `admin_bp`
- **路由**: 管理后台页面（风格管理、首页配置、作品展示、系统配置等页面）

### 4. 订单管理路由模块 ✅
- **文件**: `app/routes/admin_orders.py`
- **蓝图**: `admin_orders_bp`
- **路由**: 订单列表、订单详情、订单导出等

### 5. 商户管理路由模块 ✅
- **文件**: `app/routes/merchant.py`
- **蓝图**: `merchant_bp`
- **路由**: 商户控制台、商户管理、二维码生成等

### 6. 媒体文件路由模块 ✅
- **文件**: `app/routes/media.py`
- **蓝图**: `media_bp`
- **路由**: 图片访问、下载（原图、精修图、高清图等）

### 7. 支付路由模块 ✅
- **文件**: `app/routes/payment.py`
- **蓝图**: `payment_bp`
- **路由**: 支付创建、支付回调等

### 8. 小程序路由模块 ✅
- **文件**: `app/routes/miniprogram.py`
- **蓝图**: `miniprogram_bp`
- **路由**: 小程序相关API（部分）

### 9. 订单路由模块 ✅
- **文件**: `app/routes/order.py`
- **蓝图**: `order_bp`
- **路由**: 订单相关API

### 10. AI路由模块 ✅
- **文件**: `app/routes/ai.py`
- **蓝图**: `ai_bp`
- **路由**: AI相关功能

### 11. 美图API路由模块 ✅
- **文件**: `app/routes/meitu.py`
- **蓝图**: `meitu_bp`
- **路由**: 美图API配置和管理

### 12. AI服务商配置模块 ✅
- **文件**: `app/routes/ai_provider.py`
- **蓝图**: `ai_provider_bp`
- **路由**: AI服务商配置管理

### 13. 用户API路由模块 ✅
- **文件**: `app/routes/user_api.py`
- **蓝图**: `user_api_bp`
- **路由**: `/api/user/*` - 用户相关API

### 14. 推广API路由模块 ✅
- **文件**: `app/routes/promotion_api.py`
- **蓝图**: `promotion_api_bp`
- **路由**: `/api/promotion/*` - 推广相关API

### 15. 优惠券API路由模块 ✅
- **文件**: `app/routes/coupon_api.py`
- **蓝图**: `coupon_api_bp`
- **路由**: `/api/coupons/*` - 优惠券相关API

### 16. 管理员优惠券API路由模块 ✅
- **文件**: `app/routes/admin_coupon_api.py`
- **蓝图**: `admin_coupon_api_bp`
- **路由**: `/api/admin/coupons/*` - 管理员优惠券管理API

---

## 剩余未拆分的模块评估

### 需要拆分（高优先级）⭐⭐⭐

#### 1. 管理后台风格管理API（13个路由）
- **路径**: `/api/admin/styles/*`
- **评估**: 功能独立，路由较多，建议拆分
- **文件**: `app/routes/admin_styles_api.py`
- **包含**: 风格分类CRUD、风格图片CRUD、工作流测试等

#### 2. 管理后台推广管理API（12个路由）
- **路径**: `/api/admin/promotion/*`
- **评估**: 功能独立，路由较多，建议拆分
- **文件**: `app/routes/admin_promotion_api.py`
- **包含**: 佣金管理、推广用户管理、访问统计、提现管理等

#### 3. 预约拍照API（5个路由）
- **路径**: `/api/photo-signup/*`
- **评估**: 功能独立，建议拆分
- **文件**: `app/routes/photo_signup_api.py`
- **包含**: 预约提交、列表、状态更新、删除、导出

### 建议拆分（中优先级）⭐⭐

#### 4. 管理后台首页配置API（7个路由）
- **路径**: `/api/admin/homepage/*`
- **评估**: 功能独立，但路由较少，可拆分
- **文件**: `app/routes/admin_homepage_api.py`
- **包含**: 轮播图管理、首页配置、功能配置

#### 5. 管理后台作品展示API（5个路由）
- **路径**: `/api/admin/works-gallery/*`
- **评估**: 功能独立，但路由较少，可拆分
- **文件**: `app/routes/admin_works_api.py`
- **包含**: 作品展示管理

#### 6. 管理后台页面路由（5个路由）
- **路径**: `/admin/sizes`, `/admin/promotion`, `/admin/coupons`, `/admin/users`
- **评估**: 这些是页面路由，可以合并到 `admin.py` 或单独拆分
- **建议**: 如果 `admin.py` 已经很大，可以拆分

### 可选拆分（低优先级）⭐

#### 7. 管理后台用户管理API（1个路由）
- **路径**: `/api/admin/users/all`
- **评估**: 只有1个路由，可以合并到其他模块或保留在原文件

#### 8. 管理后台消息通知API（3个路由）
- **路径**: `/api/admin/send-message`, `/api/admin/batch-send-message`, `/api/admin/send-*-notification`
- **评估**: 功能独立，但路由较少，可拆分
- **文件**: `app/routes/admin_notification_api.py`

#### 9. 管理后台工具API（3个路由）
- **路径**: `/api/admin/init-data`, `/api/admin/clean-duplicates`, `/api/admin/update-cover-images`
- **评估**: 工具类功能，使用频率低，可以不拆分

#### 10. 物流回调API（2个路由）
- **路径**: `/api/logistics/*`
- **评估**: 功能独立，但路由很少，可以不拆分

#### 11. 二维码生成API（1个路由）
- **路径**: `/api/qrcode/generate`
- **评估**: 只有1个路由，可以合并到其他模块

#### 12. 订单相关路由（4个路由）
- **路径**: `/admin/order/*/send-data`, `/admin/order/*/check-image-size` 等
- **评估**: 可以合并到 `admin_orders.py` 或保留在原文件

#### 13. 其他零散路由（2个路由）
- **路径**: `/api/works/gallery`, `/api/example-images`
- **评估**: 路由很少，可以不拆分

---

## 拆分建议总结

### 必须拆分（3个模块）
1. ✅ 管理后台风格管理API - 13个路由，功能独立
2. ✅ 管理后台推广管理API - 12个路由，功能独立
3. ✅ 预约拍照API - 5个路由，功能独立

### 建议拆分（2个模块）
4. 管理后台首页配置API - 7个路由
5. 管理后台作品展示API - 5个路由

### 可选拆分（根据实际情况）
- 如果 `admin.py` 文件过大（>1000行），可以考虑拆分管理后台页面路由
- 其他零散路由可以保留在 `test_server.py` 中，或合并到相关模块

---

## 当前状态

- **已拆分**: 17个蓝图模块
- **剩余路由**: 约101个 `@app.route` 装饰器
- **建议继续拆分**: 5个模块（高优先级3个 + 中优先级2个）
- **可以不拆分**: 其他零散路由可以保留在原文件
