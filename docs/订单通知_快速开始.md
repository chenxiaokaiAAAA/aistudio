# 订单通知功能 - 快速开始

## 🎯 功能说明

当服务器有新订单时，系统会自动：
- ✅ 显示桌面弹窗通知
- ✅ 语音播报订单信息
- ✅ 播放提示音

## 🚀 快速安装（3步）

### 步骤 1：安装依赖库

双击运行：`安装订单通知功能.bat`

或者手动执行：
```bash
pip install plyer pyttsx3
```

### 步骤 2：测试功能

双击运行：`测试订单通知.bat`

### 步骤 3：重启服务器

重启你的Flask应用，功能就会自动启用。

```bash
python start.py
```

## ⚙️ 自定义配置（可选）

编辑文件：`order_notification_config.py`

### 常用设置：

**只启用桌面通知，关闭语音播报：**
```python
ENABLE_VOICE_NOTIFICATION = False  # 关闭语音
ENABLE_SOUND_NOTIFICATION = False  # 关闭音效
```

**完全关闭通知：**
```python
ENABLE_NOTIFICATION = False
```

**调整语音播报速度：**
```python
TTS_RATE = 120  # 数值越小语速越慢
```

## 📋 通知效果

当有新订单时，你会看到：

### 桌面通知（右下角弹窗）
```
🛒 新订单提醒
订单号: PET20250101001
客户: 张三
金额: ¥99.0
来源: 小程序
```

### 语音播报
"新订单，订单号PET20250101001，客户张三，金额99元"

### 系统提示音
Windows系统提示音

## 🔧 故障排除

### 问题1：没有收到通知？

1. 检查是否安装了依赖
   ```bash
   pip list | findstr "plyer pyttsx3"
   ```

2. 检查配置文件
   确认 `order_notification_config.py` 中 `ENABLE_NOTIFICATION = True`

3. 检查Windows通知设置
   - 打开Windows设置
   - 进入"系统" > "通知"
   - 确保"应用通知"已启用

### 问题2：语音播报是英文？

这是正常的，Windows默认只有英文语音。

**解决方案：**
1. Windows设置 > 时间和语言 > 语言
2. 添加"中文（简体）"语言包
3. 重启应用

### 问题3：想关闭某个功能？

编辑 `order_notification_config.py`：
```python
ENABLE_DESKTOP_NOTIFICATION = False  # 关闭桌面通知
ENABLE_VOICE_NOTIFICATION = False    # 关闭语音播报
ENABLE_SOUND_NOTIFICATION = False    # 关闭音效
```

## 📞 需要帮助？

查看详细文档：`订单通知配置说明.md`

---

**提示**：如果遇到任何问题，请查看日志文件 `app.log`


