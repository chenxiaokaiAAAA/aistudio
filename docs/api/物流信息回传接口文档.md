# 物流信息回传接口文档

## 接口概述

当厂家完成订单制作并发出快递后，需要通过此接口回传物流信息，系统会自动更新订单状态并通知用户。

## 接口信息

- **接口地址**: `http://moeart.cc/api/printer/logistics-callback`
- **请求方法**: `POST`
- **Content-Type**: `application/json`

## 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| order_id | string | 是 | 订单ID，格式：YT_123（我们发送给厂家的订单标识） |
| logistics_company | string | 是 | 快递公司名称，如：顺丰快递、圆通快递等 |
| tracking_number | string | 是 | 快递单号 |
| status | string | 否 | 物流状态，默认：shipped（已发货），可选：delivered（已送达） |
| remark | string | 否 | 备注信息 |

## 请求示例

```json
{
    "order_id": "YT_123",
    "logistics_company": "顺丰快递",
    "tracking_number": "SF1234567890",
    "status": "shipped",
    "remark": "订单已完成制作并发出"
}
```

## 响应格式

### 成功响应

```json
{
    "success": true,
    "message": "物流信息更新成功",
    "order_number": "PET20250916162735DF0D"
}
```

### 失败响应

```json
{
    "success": false,
    "message": "错误信息描述"
}
```

## 错误码说明

| HTTP状态码 | 说明 |
|------------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误 |
| 404 | 订单不存在 |
| 500 | 服务器内部错误 |

## 使用流程

1. **接收订单**: 厂家收到我们发送的订单（order_id: YT_123）
2. **完成制作**: 厂家完成产品制作
3. **发出快递**: 厂家发出快递，获得快递单号
4. **回传信息**: 厂家调用此接口回传物流信息
5. **系统更新**: 系统自动更新订单状态为"已发货"
6. **用户通知**: 用户可以在小程序和网页查看物流信息

## 测试接口

可以使用以下命令测试接口：

```bash
curl -X POST http://moeart.cc/api/printer/logistics-callback \
  -H "Content-Type: application/json" \
  -d '{
    "order_id": "YT_123",
    "logistics_company": "顺丰快递",
    "tracking_number": "SF1234567890",
    "status": "shipped",
    "remark": "测试物流信息"
  }'
```

## 注意事项

1. **订单ID格式**: 必须是 `YT_` 开头的格式
2. **数据格式**: 所有请求数据必须是JSON格式
3. **字符编码**: 支持中文，使用UTF-8编码
4. **重试机制**: 如果接口调用失败，建议重试3次
5. **日志记录**: 建议厂家记录接口调用日志，便于问题排查
