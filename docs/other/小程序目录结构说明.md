# 小程序目录结构完整说明

## 📋 目录概览

```
aistudio-小程序/
├── app.js                    # 小程序入口文件
├── app.json                  # 小程序全局配置
├── app.wxss                  # 小程序全局样式
├── config.js                 # 环境配置文件
├── project.config.json       # 项目配置文件
├── project.private.config.json # 私有项目配置
├── sitemap.json              # 站点地图配置
├── pages/                    # 页面目录
├── utils/                    # 工具函数目录
├── styles/                   # 样式文件目录
├── images/                   # 图片资源目录
├── static/                   # 静态资源目录
├── uploads/                  # 上传文件目录
├── media/                    # 媒体文件目录
└── cloudfunctions/           # 云函数目录
```

---

## 📁 详细目录说明

### 1. 根目录文件

| 文件 | 说明 | 用途 |
|------|------|------|
| `app.js` | 小程序入口文件 | 全局App实例，初始化逻辑 |
| `app.json` | 小程序全局配置 | 页面路由、窗口配置、tabBar配置 |
| `app.wxss` | 小程序全局样式 | 全局CSS样式，引入公共样式 |
| `config.js` | 环境配置文件 | API地址、环境切换配置 |
| `project.config.json` | 项目配置文件 | 微信开发者工具配置 |
| `project.private.config.json` | 私有项目配置 | 个人开发配置（不上传） |
| `sitemap.json` | 站点地图配置 | 小程序索引配置 |

---

### 2. pages/ - 页面目录

**说明：** 存放所有小程序页面，每个页面包含4个文件（.js、.wxml、.wxss、.json）

#### 核心功能页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `index/` | 首页 | 轮播图、活动弹窗、导航入口 |
| `style/` | 风格库 | 风格分类列表 |
| `style/style-detail/` | 风格详情 | 风格系列详情页 |
| `product/` | 产品馆 | 产品分类和产品列表 |
| `product-detail/` | 产品详情 | 产品详情、规格选择 |
| `cart/` | 购物车 | 购物车管理、订单分组 |
| `mine/` | 我的 | 个人中心、用户信息 |
| `orders/` | 我的订单 | 订单列表 |
| `order-detail/` | 订单详情 | 订单详情、核销二维码 |
| `payment/` | 支付页面 | 支付流程、订单类型选择 |

#### 用户相关页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `login/` | 登录页 | 微信登录 |
| `auth-login/` | 授权登录 | 用户授权 |
| `phone-login/` | 手机登录 | 手机号登录 |
| `verify-code/` | 验证码 | 验证码输入 |
| `user/` | 用户信息 | 用户资料 |

#### 功能页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `coupons/` | 优惠券 | 优惠券列表、领取 |
| `coupon-select/` | 选择优惠券 | 支付时选择优惠券 |
| `coupon-claim/` | 领取优惠券 | 优惠券领取页 |
| `messages/` | 消息中心 | 用户消息列表 |
| `promotion/` | 推广页面 | 推广码、佣金 |
| `digital-avatar/` | 数字分身 | 数字分身功能 |
| `works/` | 作品 | 作品展示 |
| `works-gallery/` | 作品画廊 | 作品画廊 |
| `cases/` | 案例 | 案例展示 |
| `shop/` | 商城 | 商城列表 |
| `shop-detail/` | 商城详情 | 商城详情页 |
| `production-guide/` | 制作指南 | 制作流程说明 |
| `photo-signup/` | 拍照报名 | 拍照预约 |
| `success/` | 成功页 | 操作成功提示 |

#### 定制流程页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `custom/select-style/` | 选择风格 | 定制流程-选择风格 |
| `custom/select-product/` | 选择产品 | 定制流程-选择产品 |
| `custom/select-specs/` | 选择规格 | 定制流程-选择规格 |
| `custom/upload-image/` | 上传图片 | 定制流程-上传图片 |
| `custom/confirm-order/` | 确认订单 | 定制流程-确认订单 |

#### 订单相关页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `order/` | 订单页 | 订单相关页面 |
| `order/qrcode/` | 核销二维码 | 订单核销二维码 |

#### 团购相关页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `groupon-verify/` | 团购核销 | 团购核销功能 |
| `third-party-groupon/` | 第三方团购核销 | 第三方团购核销 |

#### 管理页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `admin/` | 管理后台 | 小程序端管理功能 |
| `admin/upload-work/` | 上传作品 | 管理员上传作品 |

#### 其他页面

| 目录 | 页面名称 | 功能说明 |
|------|---------|---------|
| `detail/` | 详情页 | 通用详情页 |

---

### 3. utils/ - 工具函数目录

**说明：** 存放所有工具函数和公共逻辑

| 文件/目录 | 说明 | 用途 |
|----------|------|------|
| `api.js` | API工具函数 | URL处理、HTTPS转换 |
| `image-helper.js` | 图片处理工具 | 图片URL处理、错误处理 |
| `order-status-helper.js` | 订单状态工具 | 订单状态解析、时间格式化 |
| `user-helper.js` | 用户工具函数 | 用户登录检查、权限检查 |
| `cart-helper.js` | 购物车工具 | 购物车计算、分组逻辑 |
| `brand.js` | 品牌配置 | 品牌相关配置 |
| `design-tokens.js` | 设计令牌 | 设计系统变量 |
| `userGenerator.js` | 用户生成器 | 用户数据生成 |
| `visitTracker.js` | 访问追踪 | 用户访问记录 |
| `payment/` | 支付相关工具 | 支付处理、订单创建 |
| `product/` | 产品相关工具 | 产品选择、规格计算 |

#### utils/payment/ - 支付工具

| 文件 | 说明 |
|------|------|
| `order-creator.js` | 订单创建逻辑 |
| `payment-handler.js` | 支付处理逻辑 |
| `order-mode-selector.js` | 订单类型选择 |
| `coupon-handler.js` | 优惠券处理 |

#### utils/product/ - 产品工具

| 文件 | 说明 |
|------|------|
| `size-selector.js` | 尺寸选择逻辑 |
| `style-selector.js` | 风格选择逻辑 |
| `spec-calculator.js` | 规格计算逻辑 |

---

### 4. styles/ - 样式文件目录

**说明：** 存放公共样式文件

| 文件 | 说明 | 用途 |
|------|------|------|
| `common.wxss` | 公共样式文件 | 统一管理所有通用组件样式（按钮、导航栏、卡片等） |

**包含的样式：**
- 导航栏组件（返回按钮、首页按钮）
- 通用按钮（主要按钮、次要按钮、文本链接、核销按钮等）
- 卡片组件（风格库、产品馆卡片）
- 产品详情页组件（风格图片、尺寸效果图）
- 订单相关组件（查看详情、切换状态按钮）

---

### 5. images/ - 图片资源目录

**说明：** 存放小程序使用的图片资源

| 目录/文件 | 说明 | 用途 |
|----------|------|------|
| `tabbar/` | TabBar图标 | 底部导航栏图标 |
| `tabbar/home.png` | 首页图标（未选中） | 底部导航栏 |
| `tabbar/home-selected.png` | 首页图标（选中） | 底部导航栏 |
| `tabbar/product.png` | 产品馆图标（未选中） | 底部导航栏 |
| `tabbar/product-selected.png` | 产品馆图标（选中） | 底部导航栏 |
| `tabbar/cart.png` | 购物车图标（未选中） | 底部导航栏 |
| `tabbar/cart-selected.png` | 购物车图标（选中） | 底部导航栏 |
| `tabbar/user.png` | 我的图标（未选中） | 底部导航栏 |
| `tabbar/user-selected.png` | 我的图标（选中） | 底部导航栏 |
| `login/` | 登录相关图片 | 登录页面图片 |
| `login/README.md` | 登录图片说明 | 文档说明 |

**图片格式要求：**
- 支持格式：PNG、JPG、JPEG
- 推荐尺寸：根据使用场景（TabBar图标建议64x64px）
- 命名规范：使用小写字母和下划线

---

### 6. static/ - 静态资源目录

**说明：** 存放静态资源文件（图片、二维码等）

| 目录 | 说明 | 用途 |
|------|------|------|
| `images/` | 静态图片 | 服务器端图片资源 |
| `images/works/` | 作品图片 | 作品相关图片 |
| `qrcodes/` | 二维码 | 生成的二维码图片 |

**注意：** 这个目录通常由后端服务器管理，小程序通过API获取这些资源的URL。

---

### 7. uploads/ - 上传文件目录

**说明：** 存放用户上传的文件

| 目录 | 说明 | 用途 |
|------|------|------|
| `original/` | 原始图片 | 用户上传的原始图片 |
| `final/` | 最终图片 | 处理后的最终图片 |

**注意：** 这个目录通常由后端服务器管理，小程序通过API上传文件。

---

### 8. media/ - 媒体文件目录

**说明：** 存放媒体文件（视频、音频等）

**当前状态：** 空目录，预留用于未来扩展

---

### 9. cloudfunctions/ - 云函数目录

**说明：** 存放微信云函数代码

| 目录 | 说明 | 用途 |
|------|------|------|
| `createOrder/` | 创建订单云函数 | 订单创建逻辑 |
| `createOrder/index.js` | 订单创建代码 | 云函数实现 |
| `generateQrcode/` | 生成二维码云函数 | 二维码生成逻辑 |
| `generateQrcode/index.js` | 二维码生成代码 | 云函数实现 |

---

## 📊 文件类型说明

### 小程序页面文件（每个页面4个文件）

| 文件类型 | 说明 | 用途 |
|----------|------|------|
| `.js` | JavaScript逻辑文件 | 页面逻辑、数据处理、API调用 |
| `.wxml` | 页面结构文件 | HTML结构，使用小程序标签 |
| `.wxss` | 页面样式文件 | CSS样式，使用rpx单位 |
| `.json` | 页面配置文件 | 页面配置、组件引用 |

### 配置文件

| 文件类型 | 说明 | 用途 |
|----------|------|------|
| `.json` | JSON配置文件 | 页面配置、全局配置 |
| `.js` | JavaScript配置文件 | 环境配置、工具函数 |

---

## 🔗 目录依赖关系

```
app.js (全局入口)
  ├── config.js (环境配置)
  ├── app.wxss (全局样式)
  │   └── styles/common.wxss (公共样式)
  └── pages/ (所有页面)
      ├── index/ (首页)
      ├── product/ (产品馆)
      │   └── utils/product/ (产品工具)
      ├── cart/ (购物车)
      │   └── utils/cart-helper.js (购物车工具)
      ├── payment/ (支付)
      │   └── utils/payment/ (支付工具)
      └── ...
```

---

## 📝 注意事项

### 1. 图片资源

- **本地图片：** 放在 `images/` 目录，使用相对路径引用
- **网络图片：** 通过API获取URL，使用 `ImageHelper.processImageUrl()` 处理
- **静态资源：** 放在 `static/` 目录，由后端管理

### 2. 样式管理

- **公共样式：** 统一在 `styles/common.wxss` 中管理
- **页面样式：** 在各自的 `.wxss` 文件中
- **全局样式：** 在 `app.wxss` 中

### 3. 工具函数

- **通用工具：** 放在 `utils/` 根目录
- **分类工具：** 放在 `utils/分类名/` 子目录
- **使用方式：** `const Helper = require('../../utils/helper.js')`

### 4. 页面独立性

- ✅ **所有页面完全独立** - 可以独立更新UI
- ✅ **样式统一管理** - 公共样式集中管理
- ✅ **工具函数模块化** - 便于维护和复用

---

**最后更新：** 2026-01-31
