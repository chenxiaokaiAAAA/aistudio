# 物流回调测试脚本使用说明

## 📋 概述

针对订单 `PET17582664981342618` 的物流回调测试脚本，用于测试物流信息更新接口。

## 🚀 快速开始

### 方法1: Python脚本 (推荐)

```bash
# 单次测试
python simple_logistics_test.py

# 完整测试
python logistics_callback_test.py
```

### 方法2: PowerShell脚本 (Windows)

```powershell
.\logistics_callback_powershell.ps1
```

### 方法3: Bash脚本 (Linux/Mac)

```bash
bash logistics_callback_curl.sh
```

### 方法4: 手动curl命令

```bash
curl -X POST "https://photogooo/api/logistics/callback" \
  -H "Content-Type: application/json" \
  -d '{
    "order_number": "PET17582664981342618",
    "tracking_number": "SF1234567890",
    "logistics_company": "顺丰速运",
    "estimated_delivery": "2025-09-21",
    "status": "已发货",
    "remark": "商品已发出，请注意查收"
  }'
```

## 📝 测试数据

### 完整格式
```json
{
    "order_number": "PET17582664981342618",
    "tracking_number": "SF1234567890",
    "logistics_company": "顺丰速运",
    "estimated_delivery": "2025-09-21",
    "status": "已发货",
    "remark": "商品已发出，请注意查收"
}
```

### 简化格式
```json
{
    "order_number": "PET17582664981342618",
    "tracking_number": "SF1234567890",
    "logistics_company": "顺丰速运"
}
```

## ✅ 预期响应

### 成功响应
```json
{
    "success": true,
    "message": "物流信息更新成功",
    "data": {
        "order_number": "PET17582664981342618",
        "logistics_company": "顺丰速运",
        "tracking_number": "SF1234567890",
        "status": "processing",
        "commission": 0.0
    }
}
```

### 失败响应
```json
{
    "success": false,
    "message": "错误信息"
}
```

## 🔧 测试用例

### 测试用例1: 顺丰速运
- **快递单号**: SF1234567890
- **快递公司**: 顺丰速运
- **预计送达**: 2025-09-21

### 测试用例2: 圆通速递
- **快递单号**: YT9876543210
- **快递公司**: 圆通速递
- **预计送达**: 2025-09-22

### 测试用例3: 中通快递
- **快递单号**: ZT5556667778
- **快递公司**: 中通快递
- **预计送达**: 2025-09-23

### 测试用例4: 京东物流 (简化格式)
- **快递单号**: JD8889990001
- **快递公司**: 京东物流

## 📊 测试结果验证

测试成功后，您可以在后台管理界面验证：

1. **订单状态**: 更新为 `processing`（已发货）
2. **物流信息**: 显示快递公司和快递单号
3. **佣金计算**: 自动重新计算佣金
4. **客户地址**: 保持不变，不会被覆盖

## 🚨 注意事项

1. **订单号**: 确保使用正确的订单号 `PET17582664981342618`
2. **网络连接**: 确保能够访问 `https://photogooo`
3. **测试顺序**: 建议按顺序执行测试用例
4. **数据更新**: 每次测试都会更新订单的物流信息

## 📞 技术支持

如果遇到问题，请检查：
- 订单号是否正确
- 网络连接是否正常
- 接口地址是否正确
- 请求格式是否正确

---

**版本**: v1.0  
**更新日期**: 2025-09-19  
**目标订单**: PET17582664981342618
