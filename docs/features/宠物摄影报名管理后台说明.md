# 宠物摄影报名管理后台使用说明

## 🎯 **后台访问地址**

访问管理后台：`https://moeart.cc/admin/photo-signups`

## 📋 **功能介绍**

### ✅ **完成的功能**

1. **📱 前端报名表单**
   - ✅ 个人信息填写（姓名、手机号）
   - ✅ 宠物信息（品种、体重、年龄、性格）
   - ✅ 预约时间选择
   - ✅ 宠物图片上传（多张图片）
   - ✅ 备注信息填写
   - ✅ 推广信息自动获取

2. **🗃️ 后端数据存储**
   - ✅ PhotoSignup 数据库模型
   - ✅ 宠物图片JSON存储
   - ✅ 推广追踪信息
   - ✅ 状态管理字段

3. **🔧 后台管理功能**
   - ✅ 报名列表查看
   - ✅ 状态筛选（待联系、已联系、已预约、已完成、已取消）
   - ✅ 报名详情查看
   - ✅ 状态更新功能
   - ✅ 备注管理
   - ✅ 宠物图片预览

## 🎛️ **管理后台功能详解**

### 1. **统计面板**
- 📊 **总报名数** - 显示所有报名总数
- ⏳ **待处理** - 待联系的报名数量
- ✅ **已完成** - 已完成的报名数量
- 📅 **本月新增** - 本月新增的报名数量

### 2. **筛选功能**
- 🔍 **按状态筛选** - 待联系、已联系、已预约、已完成、已取消
- 👤 **按姓名搜索** - 快速查找特定用户
- 📱 **按手机号搜索** - 精确查找用户联系方式

### 3. **报名列表**
- 📝 **基础信息** - 姓名、手机号、报名时间
- 🐕 **宠物信息** - 品种、体重、年龄（紧凑显示）
- 🖼️ **宠物图片** - 缩略图预览，点击查看大图
- 📅 **预约时间** - 用户选择的拍摄时间
- 🏷️ **状态标签** - 彩色状态指示
- ⚡ **操作按钮** - 查看详情、更新状态

### 4. **详情查看**
- 👤 **用户信息** - 完整的联系信息
- 🐾 **宠物详情** - 完整的宠物信息
- 📝 **备注信息** - 用户填写的备注
- 🖼️ **宠物图片** - 高清图片展示
- 📊 **推广信息** - 推广来源追踪（如有）

### 5. **状态管理**
报名状态包括：
- 🟡 **待联系 (pending)** - 新提交的报名
- 🔵 **已联系 (contacted)** - 已电话联系用户
- 🟢 **已预约 (scheduled)** - 已确定拍摄时间
- ⚫ **已完成 (completed)** - 拍摄服务完成
- 🔴 **已取消 (cancelled)** - 取消的报名

## 💾 **数据库结构**

### PhotoSignup 表字段：
```sql
id                   INTEGER PRIMARY KEY    -- 主键ID
name                 VARCHAR(50) NOT NULL    -- 用户姓名
phone                VARCHAR(20) NOT NULL    -- 联系电话
pet_breed            VARCHAR(50) NOT NULL    -- 宠物品种
pet_weight           VARCHAR(59) NOT NULL    -- 宠物体重
pet_age              VARCHAR(50) NOT NULL    -- 宠物年龄
pet_character        VARCHAR(500)           -- 宠物性格
available_date       VARCHAR(50)             -- 预约时间
additional_notes     VARCHAR(500)            -- 备注信息
pet_images           TEXT                    -- 宠物图片JSON
user_id              VARCHAR(100)            -- 用户ID
referrer_user_id     VARCHAR(100)            -- 推广人ID
referrer_promotion_code VARCHAR(50)          -- 推广码
source               VARCHAR(50)             -- 来源
status               VARCHAR(20)             -- 状态
notes                VARCHAR(1000)           -- 内部备注
submit_time          DATETIME                -- 提交时间
contact_time         DATETIME                -- 联系时间
schedule_time        DATETIME                -- 预约时间
complete_time        DATETIME                -- 完成时间
```

## 🔌 **API接口**

### 提交报名
- **URL**: `POST /api/photo-signup/submit`
- **功能**: 处理用户提交的报名信息

### 获取报名列表
- **URL**: `GET /api/photo-signup/list`
- **参数**: `page`, `per_page`, `status`
- **功能**: 管理员查看报名列表

### 更新状态
- **URL**: `PUT /api/photo-signup/{id}/update-status`
- **功能**: 更新报名状态和备注

## 📝 **前端数据结构**

### 报名提交数据格式：
```json
{
    "name": "张三",
    "phone": "13800138000",
    "petBreed": "金毛",
    "petWeight": "大型犬",
    "petAge": "2岁",
    "petCharacter": "温顺活泼",
    "availableDate": "周末",
    "additionalNotes": "希望拍摄户外照片",
    "petImages": [
        "http://example.com/image1.jpg",
        "http://example.com/image2.jpg"
    ],
    "userId": "user_123",
    "referrerUserId": "ref_456",
    "referrerPromotionCode": "PROMO001",
    "source": "miniprogram_carousel"
}
```

## 🚀 **部署说明**

### 数据库迁移（如需要）
如果需要完整的图片功能，执行：
```sql
ALTER TABLE photo_signup ADD COLUMN pet_images TEXT;
```

### 轮播图配置
在管理后台配置轮播图时：
```json
{
    "title": "宠物摄影报名",
    "link": "/pages/photo-signup/photo-signup",
    "type": "photo_signup",
    "promotion_params": {
        "promotionCode": "PET_PHOTO_2024",
        "userId": "PRO_USER_001"
    }
}
```

## 🔧 **故障排除**

### 常见问题：

1. **图片不显示**
   - 检查图片URL是否正确
   - 确认前端正确上传到服务器
   - 验证数据库JSON格式

2. **状态更新失败**
   - 检查权限设置
   - 确认API调用正确
   - 查看服务器日志

3. **报名数据丢失**
   - 检查数据库连接
   - 确认API错误处理
   - 查看提交日志

## 📞 **技术支持**

如有问题请联系开发团队。
管理后台已完全就绪，可以立即开始接受和使用宠物摄影报名服务！🎉

---

**访问链接**: `https://moeart.cc/admin/photo-signups`
