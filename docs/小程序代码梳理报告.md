# å°ç¨‹åºä»£ç æ¢³ç†æŠ¥å‘Š

## ğŸ“‹ ç›®å½•
1. [ä»£ç ä¼˜åŒ–å»ºè®®](#ä»£ç ä¼˜åŒ–å»ºè®®)
2. [é‡è¦APIæ¥å£æ¸…å•](#é‡è¦apiæ¥å£æ¸…å•)
3. [é¡µé¢ç»“æ„åˆ†æ](#é¡µé¢ç»“æ„åˆ†æ)
4. [UIæ›¿æ¢æ³¨æ„äº‹é¡¹](#uiæ›¿æ¢æ³¨æ„äº‹é¡¹)

---

## ä¸€ã€ä»£ç ä¼˜åŒ–å»ºè®®

### 1.1 æ–‡ä»¶ç»“æ„ä¼˜åŒ–

#### âœ… å·²ä¼˜åŒ–çš„éƒ¨åˆ†
- **é¡µé¢ç‹¬ç«‹æ‹†åˆ†**ï¼šæ¯ä¸ªé¡µé¢éƒ½æœ‰ç‹¬ç«‹çš„ `.js`ã€`.wxml`ã€`.wxss`ã€`.json` æ–‡ä»¶
- **å·¥å…·å‡½æ•°æ¨¡å—åŒ–**ï¼š`utils/` ç›®å½•ä¸‹æœ‰ç‹¬ç«‹çš„å·¥å…·å‡½æ•°æ–‡ä»¶
- **é…ç½®æ–‡ä»¶é›†ä¸­ç®¡ç†**ï¼š`config.js` ç»Ÿä¸€ç®¡ç†ç¯å¢ƒé…ç½®

#### âš ï¸ éœ€è¦ä¼˜åŒ–çš„éƒ¨åˆ†

1. **APIè°ƒç”¨åˆ†æ•£**
   - é—®é¢˜ï¼šAPIè°ƒç”¨åˆ†æ•£åœ¨å„ä¸ªé¡µé¢ä¸­ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„APIç®¡ç†
   - å»ºè®®ï¼šåœ¨ `utils/api.js` ä¸­ç»Ÿä¸€å°è£…æ‰€æœ‰APIè°ƒç”¨æ–¹æ³•
   - å½“å‰çŠ¶æ€ï¼š`utils/api.js` å·²æœ‰éƒ¨åˆ†å·¥å…·å‡½æ•°ï¼Œä½†APIè°ƒç”¨æ–¹æ³•ä¸å®Œæ•´

2. **é‡å¤ä»£ç **
   - é—®é¢˜ï¼šå¤šä¸ªé¡µé¢éƒ½æœ‰ç±»ä¼¼çš„å›¾ç‰‡åŠ è½½ã€é”™è¯¯å¤„ç†é€»è¾‘
   - å»ºè®®ï¼šæå–ä¸ºå…¬å…±ç»„ä»¶æˆ–å·¥å…·å‡½æ•°
   - ä½ç½®ï¼š`pages/product-detail/`ã€`pages/product/`ã€`pages/cart/` ç­‰

3. **å…¨å±€çŠ¶æ€ç®¡ç†**
   - é—®é¢˜ï¼šå¤§é‡ä½¿ç”¨ `wx.getStorageSync` å’Œ `app.globalData`
   - å»ºè®®ï¼šè€ƒè™‘ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ `mobx-miniprogram`ï¼‰æˆ–ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†å·¥å…·
   - å½“å‰çŠ¶æ€ï¼šçŠ¶æ€ç®¡ç†åˆ†æ•£ï¼Œä¸å¤Ÿç»Ÿä¸€

4. **é”™è¯¯å¤„ç†**
   - é—®é¢˜ï¼šé”™è¯¯å¤„ç†é€»è¾‘ä¸ç»Ÿä¸€ï¼Œæœ‰äº›åœ°æ–¹ç¼ºå°‘é”™è¯¯å¤„ç†
   - å»ºè®®ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ·»åŠ å…¨å±€é”™è¯¯å¤„ç†

### 1.2 ä»£ç è´¨é‡ä¼˜åŒ–

#### éœ€è¦é‡æ„çš„æ–‡ä»¶ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

**é«˜ä¼˜å…ˆçº§ï¼š**
1. `pages/payment/payment.js` (1805è¡Œ) - æ–‡ä»¶è¿‡å¤§ï¼Œå»ºè®®æ‹†åˆ†
   - å»ºè®®ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼ˆè®¢å•åˆ›å»ºã€æ”¯ä»˜å¤„ç†ã€è®¢å•ç±»å‹é€‰æ‹©ç­‰ï¼‰
   
2. `pages/product-detail/product-detail.js` (962è¡Œ) - æ–‡ä»¶è¾ƒå¤§
   - å»ºè®®ï¼šå°†æ ·å¼é€‰æ‹©ã€å°ºå¯¸é€‰æ‹©ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—

3. `pages/cart/cart.js` - è´­ç‰©è½¦é€»è¾‘å¤æ‚
   - å»ºè®®ï¼šå°†åˆ†ç»„é€»è¾‘ã€è®¡ç®—é€»è¾‘æ‹†åˆ†ä¸ºå·¥å…·å‡½æ•°

**ä¸­ä¼˜å…ˆçº§ï¼š**
4. `app.js` (880è¡Œ) - å…¨å±€é€»è¾‘è¾ƒå¤š
   - å»ºè®®ï¼šå°†ç™»å½•æ£€æŸ¥ã€æ¨å¹¿è¿½è¸ªç­‰æ‹†åˆ†ä¸ºç‹¬ç«‹æ¨¡å—

5. `utils/api.js` - APIå·¥å…·å‡½æ•°ä¸å®Œæ•´
   - å»ºè®®ï¼šè¡¥å……æ‰€æœ‰APIè°ƒç”¨çš„å°è£…æ–¹æ³•

---

## äºŒã€é‡è¦APIæ¥å£æ¸…å•

### 2.1 äº§å“ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/catalog.py`

| æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è°ƒç”¨ä½ç½® |
|---------|------|------|---------|
| `/api/miniprogram/product-categories` | GET | è·å–äº§å“åˆ†ç±»ï¼ˆä¸€çº§/äºŒçº§ï¼‰ | `pages/product/product.js` |
| `/api/miniprogram/products` | GET | è·å–äº§å“åˆ—è¡¨ | `pages/product/product.js` |
| `/api/miniprogram/styles` | GET | è·å–é£æ ¼åˆ†ç±»å’Œé£æ ¼å›¾ç‰‡ | `pages/product-detail/product-detail.js` |
| `/api/miniprogram/banners` | GET | è·å–é¦–é¡µè½®æ’­å›¾ | `pages/index/index.js` |

### 2.2 è®¢å•ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/orders.py`

| æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è°ƒç”¨ä½ç½® |
|---------|------|------|---------|
| `/api/miniprogram/orders` | POST | åˆ›å»ºè®¢å• | `pages/payment/payment.js` |
| `/api/miniprogram/orders` | GET | è·å–è®¢å•åˆ—è¡¨ | `pages/orders/orders.js` |
| `/api/miniprogram/order/<order_number>` | GET | è·å–è®¢å•è¯¦æƒ… | `pages/order-detail/order-detail.js` |
| `/api/miniprogram/orders/<order_id>/update-order-mode` | POST | æ›´æ–°è®¢å•ç±»å‹ï¼ˆç«‹å³æ‹æ‘„/ç«‹å³åˆ¶ä½œï¼‰ | `pages/payment/payment.js` |
| `/api/miniprogram/orders/<order_id>/generate-qrcode` | POST | ç”Ÿæˆæ ¸é”€äºŒç»´ç  | `pages/order-detail/order-detail.js` |
| `/api/miniprogram/order/upload` | POST | ä¸Šä¼ è®¢å•å›¾ç‰‡ | `pages/order-detail/order-detail.js` |

### 2.3 ç”¨æˆ·ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/common.py` æˆ–å…¶ä»–

| æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è°ƒç”¨ä½ç½® |
|---------|------|------|---------|
| `/api/user/visit` | POST | ç”¨æˆ·è®¿é—®è¿½è¸ª | `utils/visitTracker.js` |
| `/api/user/info` | GET/POST | è·å–/æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | `pages/user/user.js` |

### 2.4 ä¼˜æƒ åˆ¸ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/promotion.py` æˆ–å…¶ä»–

| æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è°ƒç”¨ä½ç½® |
|---------|------|------|---------|
| `/api/miniprogram/coupons` | GET | è·å–å¯ç”¨ä¼˜æƒ åˆ¸ | `pages/payment/payment.js` |

### 2.5 å…¶ä»–æ¥å£

| æ¥å£è·¯å¾„ | æ–¹æ³• | è¯´æ˜ | è°ƒç”¨ä½ç½® |
|---------|------|------|---------|
| `/api/miniprogram/works` | GET | è·å–ä½œå“åˆ—è¡¨ | `pages/works/works.js` |
| `/api/miniprogram/digital-avatar/list` | GET | è·å–æ•°å­—åˆ†èº«åˆ—è¡¨ | `pages/digital-avatar/digital-avatar.js` |

---

## ä¸‰ã€é¡µé¢ç»“æ„åˆ†æ

### 3.1 æ ¸å¿ƒé¡µé¢æ¸…å•

#### âœ… å·²ç‹¬ç«‹æ‹†åˆ†çš„é¡µé¢

**1. ç™»å½•ç›¸å…³ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/login/login` - éšç§åè®®é¡µé¢ï¼ˆé¦–æ¬¡ç™»å½•ï¼‰
- `pages/auth-login/auth-login` - æˆæƒç™»å½•é¡µé¢
- `pages/phone-login/phone-login` - æ‰‹æœºå·ç™»å½•é¡µé¢
- `pages/verify-code/verify-code` - éªŒè¯ç é¡µé¢

**2. é¦–é¡µï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/index/index` - é¦–é¡µ
  - âœ… è½®æ’­å›¾ï¼ˆbannerï¼‰
  - âœ… å¹¿å‘Šå¼¹çª—ï¼ˆ`showActivityModal`ï¼‰
  - âœ… æˆæƒå¼¹çª—ï¼ˆ`showAuthModal`ï¼‰

**3. é£æ ¼åº“ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/style/style` - é£æ ¼åº“ä¸»é¡µï¼ˆä¸€çº§ç›®å½•/äºŒçº§ç›®å½•ï¼‰
- `pages/style/style-detail/style-detail` - é£æ ¼è¯¦æƒ…é¡µ

**4. äº§å“é¦†ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/product/product` - äº§å“é¦†ä¸»é¡µï¼ˆä¸€çº§ç›®å½•/äºŒçº§ç›®å½•ï¼‰
- `pages/product-detail/product-detail` - äº§å“è¯¦æƒ…é¡µ

**5. è´­ç‰©è½¦ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/cart/cart` - è´­ç‰©è½¦é¡µé¢

**6. æˆ‘çš„ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/mine/mine` - æˆ‘çš„ä¸»é¡µ
- `pages/orders/orders` - æˆ‘çš„è®¢å•åˆ—è¡¨
- `pages/order-detail/order-detail` - è®¢å•è¯¦æƒ…é¡µ

**7. æ”¯ä»˜ç›¸å…³ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/payment/payment` - æ”¯ä»˜é¡µé¢
- `pages/success/success` - è®¢å•æˆåŠŸé¡µé¢

**8. å…¶ä»–åŠŸèƒ½é¡µé¢ï¼ˆå·²æ‹†åˆ†ï¼‰**
- `pages/order/qrcode` - æ ¸é”€äºŒç»´ç é¡µé¢
- `pages/digital-avatar/digital-avatar` - æ•°å­—åˆ†èº«é¡µé¢
- `pages/coupons/coupons` - ä¼˜æƒ åˆ¸åˆ—è¡¨
- `pages/coupon-select/coupon-select` - ä¼˜æƒ åˆ¸é€‰æ‹©
- `pages/coupon-claim/coupon-claim` - ä¼˜æƒ åˆ¸é¢†å–

#### âš ï¸ éœ€è¦ç¡®è®¤çš„é¡µé¢

**å®šåˆ¶æµç¨‹é¡µé¢ï¼ˆå¯èƒ½éœ€è¦æ•´åˆï¼‰**
- `pages/custom/select-style/select-style` - é€‰æ‹©é£æ ¼
- `pages/custom/select-product/select-product` - é€‰æ‹©äº§å“
- `pages/custom/upload-image/upload-image` - ä¸Šä¼ å›¾ç‰‡
- `pages/custom/confirm-order/confirm-order` - ç¡®è®¤è®¢å•

**å…¶ä»–é¡µé¢**
- `pages/works/works` - ä½œå“åˆ—è¡¨
- `pages/works-gallery/works-gallery` - ä½œå“ç”»å»Š
- `pages/cases/cases` - æ¡ˆä¾‹é¡µé¢
- `pages/promotion/promotion` - æ¨å¹¿é¡µé¢
- `pages/shop/shop` - å•†åŸé¡µé¢
- `pages/shop-detail/shop-detail` - å•†åŸè¯¦æƒ…

### 3.2 é¡µé¢ä¾èµ–å…³ç³»

```
å¯åŠ¨æµç¨‹ï¼š
app.js (onLaunch)
  â””â”€> pages/login/login (é¦–æ¬¡ç™»å½•ï¼Œéšç§åè®®)
      â””â”€> pages/index/index (é¦–é¡µ)
          â”œâ”€> pages/style/style (é£æ ¼åº“)
          â”œâ”€> pages/product/product (äº§å“é¦†)
          â””â”€> pages/cart/cart (è´­ç‰©è½¦)
              â””â”€> pages/payment/payment (æ”¯ä»˜)
                  â””â”€> pages/success/success (æˆåŠŸ)
                      â””â”€> pages/orders/orders (æˆ‘çš„è®¢å•)
                          â””â”€> pages/order-detail/order-detail (è®¢å•è¯¦æƒ…)
```

### 3.3 é¡µé¢ç»„ä»¶åŒ–æƒ…å†µ

#### âœ… å·²ç»„ä»¶åŒ–çš„éƒ¨åˆ†
- æ¯ä¸ªé¡µé¢éƒ½æœ‰ç‹¬ç«‹çš„ `.wxml`ã€`.wxss`ã€`.js` æ–‡ä»¶
- å¯¼èˆªæ ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼ï¼ˆ`navigationStyle: "custom"`ï¼‰

#### âš ï¸ æœªç»„ä»¶åŒ–çš„éƒ¨åˆ†
- **å…¬å…±å¯¼èˆªæ **ï¼šæ¯ä¸ªé¡µé¢éƒ½é‡å¤å®ç°å¯¼èˆªæ ä»£ç 
  - å»ºè®®ï¼šæå–ä¸ºå…¬å…±ç»„ä»¶ `components/navbar/navbar`
- **åº•éƒ¨TabBar**ï¼šä½¿ç”¨ç³»ç»ŸTabBarï¼Œä½†æ ·å¼éœ€è¦ç»Ÿä¸€
- **åŠ è½½çŠ¶æ€**ï¼šæ¯ä¸ªé¡µé¢éƒ½æœ‰ç‹¬ç«‹çš„åŠ è½½çŠ¶æ€å®ç°
  - å»ºè®®ï¼šæå–ä¸ºå…¬å…±ç»„ä»¶ `components/loading/loading`
- **ç©ºçŠ¶æ€**ï¼šè®¢å•åˆ—è¡¨ã€è´­ç‰©è½¦ç­‰éƒ½æœ‰ç©ºçŠ¶æ€ï¼Œä½†å®ç°ä¸ç»Ÿä¸€
  - å»ºè®®ï¼šæå–ä¸ºå…¬å…±ç»„ä»¶ `components/empty/empty`

---

## å››ã€UIæ›¿æ¢æ³¨æ„äº‹é¡¹

### 4.1 å°ç¨‹åºé¡µé¢æ ¼å¼è¯´æ˜

å°ç¨‹åºä½¿ç”¨ **WXML + WXSS + JS** æ ¼å¼ï¼Œä¸æ˜¯HTMLï¼š

- **WXML**ï¼šç±»ä¼¼HTMLï¼Œä½†æœ‰ç‰¹æ®Šæ ‡ç­¾ï¼ˆå¦‚ `<view>`ã€`<text>`ã€`<image>`ï¼‰
- **WXSS**ï¼šç±»ä¼¼CSSï¼Œä½†ä½¿ç”¨ `rpx` å•ä½ï¼ˆå“åº”å¼åƒç´ ï¼‰
- **JS**ï¼šæ ‡å‡†JavaScriptï¼Œä½†ä½¿ç”¨å°ç¨‹åºAPIï¼ˆå¦‚ `wx.request`ã€`wx.navigateTo`ï¼‰

### 4.2 UIæ›¿æ¢æµç¨‹

#### æ–¹å¼ä¸€ï¼šæä¾›è®¾è®¡ç¨¿ + è¯´æ˜ï¼ˆæ¨èï¼‰

**æ‚¨éœ€è¦æä¾›ï¼š**
1. **è®¾è®¡ç¨¿**ï¼ˆFigmaã€Sketchã€PSDç­‰ï¼‰
2. **é¡µé¢äº¤äº’è¯´æ˜**ï¼ˆå“ªäº›å…ƒç´ å¯ç‚¹å‡»ã€è·³è½¬é€»è¾‘ç­‰ï¼‰
3. **è®¾è®¡è§„èŒƒ**ï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰ï¼‰

**æˆ‘ä¼šå¸®æ‚¨ï¼š**
1. å°†è®¾è®¡ç¨¿è½¬æ¢ä¸ºWXMLç»“æ„
2. å°†æ ·å¼è½¬æ¢ä¸ºWXSS
3. ä¿æŒåŸæœ‰çš„JSé€»è¾‘ä¸å˜
4. ç¡®ä¿äº¤äº’åŠŸèƒ½æ­£å¸¸

#### æ–¹å¼äºŒï¼šæä¾›HTMLæ ¼å¼ï¼ˆéœ€è¦è½¬æ¢ï¼‰

**å¦‚æœæ‚¨æä¾›HTMLï¼š**
1. æˆ‘ä¼šå°†HTMLæ ‡ç­¾è½¬æ¢ä¸ºWXMLæ ‡ç­¾
   - `<div>` â†’ `<view>`
   - `<span>` â†’ `<text>`
   - `<img>` â†’ `<image>`
   - `<button>` â†’ `<button>`ï¼ˆä¿æŒï¼‰
2. å°†CSSè½¬æ¢ä¸ºWXSS
   - `px` â†’ `rpx`ï¼ˆéœ€è¦æŒ‰æ¯”ä¾‹è½¬æ¢ï¼Œé€šå¸¸æ˜¯ `px * 2 = rpx`ï¼‰
   - ä¿æŒæ ·å¼é€»è¾‘ä¸å˜
3. è°ƒæ•´å°ç¨‹åºç‰¹æœ‰çš„å±æ€§
   - æ·»åŠ  `wx:if`ã€`wx:for` ç­‰æ•°æ®ç»‘å®š
   - æ·»åŠ äº‹ä»¶ç»‘å®šï¼ˆ`bindtap`ã€`bindchange` ç­‰ï¼‰

### 4.3 æ›¿æ¢æ—¶éœ€è¦ä¿ç•™çš„å…³é”®éƒ¨åˆ†

#### 1. æ•°æ®ç»‘å®šï¼ˆå¿…é¡»ä¿ç•™ï¼‰
```wxml
<!-- å¿…é¡»ä¿ç•™è¿™äº›æ•°æ®ç»‘å®š -->
<view wx:for="{{items}}" wx:key="id">
  <text>{{item.name}}</text>
</view>
```

#### 2. äº‹ä»¶å¤„ç†ï¼ˆå¿…é¡»ä¿ç•™ï¼‰
```wxml
<!-- å¿…é¡»ä¿ç•™è¿™äº›äº‹ä»¶ç»‘å®š -->
<button bindtap="handleClick">ç‚¹å‡»</button>
```

#### 3. æ¡ä»¶æ¸²æŸ“ï¼ˆå¿…é¡»ä¿ç•™ï¼‰
```wxml
<!-- å¿…é¡»ä¿ç•™è¿™äº›æ¡ä»¶åˆ¤æ–­ -->
<view wx:if="{{showModal}}">å¼¹çª—å†…å®¹</view>
```

#### 4. APIè°ƒç”¨é€»è¾‘ï¼ˆå¿…é¡»ä¿ç•™ï¼‰
```javascript
// å¿…é¡»ä¿ç•™è¿™äº›APIè°ƒç”¨
wx.request({
  url: '...',
  success: (res) => { ... }
})
```

### 4.4 å„é¡µé¢æ›¿æ¢æ³¨æ„äº‹é¡¹

#### é¦–é¡µ (`pages/index/index`)
- âœ… è½®æ’­å›¾ï¼šä¿ç•™ `swiper` ç»„ä»¶å’Œæ•°æ®ç»‘å®š
- âœ… å¹¿å‘Šå¼¹çª—ï¼šä¿ç•™ `showActivityModal` çŠ¶æ€å’Œå…³é—­é€»è¾‘
- âœ… æˆæƒå¼¹çª—ï¼šä¿ç•™ `showAuthModal` çŠ¶æ€å’Œæˆæƒé€»è¾‘
- âš ï¸ æ³¨æ„ï¼šå¯¼èˆªæ ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼ï¼Œéœ€è¦ä¿æŒå›ºå®šå®šä½

#### é£æ ¼åº“ (`pages/style/style`)
- âœ… ä¸€çº§ç›®å½•/äºŒçº§ç›®å½•ï¼šä¿ç•™åˆ†ç±»æ•°æ®ç»‘å®š
- âœ… é£æ ¼å›¾ç‰‡åˆ—è¡¨ï¼šä¿ç•™ `wx:for` å¾ªç¯
- âš ï¸ æ³¨æ„ï¼šç‚¹å‡»é£æ ¼è·³è½¬åˆ°è¯¦æƒ…é¡µçš„é€»è¾‘

#### äº§å“é¦† (`pages/product/product`)
- âœ… ä¸€çº§ç›®å½•/äºŒçº§ç›®å½•ï¼šä¿ç•™åˆ†ç±»æ•°æ®ç»‘å®š
- âœ… äº§å“å¡ç‰‡ï¼šä¿ç•™äº§å“æ•°æ®ç»‘å®š
- âš ï¸ æ³¨æ„ï¼šç‚¹å‡»äº§å“è·³è½¬åˆ°è¯¦æƒ…é¡µçš„é€»è¾‘

#### äº§å“è¯¦æƒ…é¡µ (`pages/product-detail/product-detail`)
- âœ… äº§å“å›¾ç‰‡ï¼šä¿ç•™å›¾ç‰‡æ•°æ®ç»‘å®š
- âœ… è§„æ ¼é€‰æ‹©æ¨¡æ€æ¡†ï¼šä¿ç•™ `showSpecModal` çŠ¶æ€
- âœ… é£æ ¼é€‰æ‹©ï¼šä¿ç•™é£æ ¼æ•°æ®ç»‘å®šå’Œé€‰æ‹©é€»è¾‘
- âš ï¸ æ³¨æ„ï¼šæ¨¡æ€æ¡†çš„æ˜¾ç¤º/éšè—é€»è¾‘å¿…é¡»ä¿ç•™

#### è´­ç‰©è½¦ (`pages/cart/cart`)
- âœ… å•†å“åˆ—è¡¨ï¼šä¿ç•™ `groupedCartItems` æ•°æ®ç»‘å®š
- âœ… å…¨é€‰/å•é€‰ï¼šä¿ç•™é€‰æ‹©çŠ¶æ€é€»è¾‘
- âœ… åˆ†ç»„æ˜¾ç¤ºï¼šä¿ç•™äºŒçº§åˆ†ç±»åˆ†ç»„é€»è¾‘
- âš ï¸ æ³¨æ„ï¼šåˆ é™¤ã€ä¿®æ”¹æ•°é‡ç­‰æ“ä½œé€»è¾‘

#### æ”¯ä»˜é¡µé¢ (`pages/payment/payment`)
- âœ… è®¢å•ä¿¡æ¯ï¼šä¿ç•™è®¢å•æ•°æ®ç»‘å®š
- âœ… ä¼˜æƒ åˆ¸é€‰æ‹©ï¼šä¿ç•™ä¼˜æƒ åˆ¸é€»è¾‘
- âœ… è®¢å•ç±»å‹é€‰æ‹©æ¨¡æ€æ¡†ï¼šä¿ç•™ `showOrderModeModal` çŠ¶æ€
- âš ï¸ æ³¨æ„ï¼šæ”¯ä»˜æµç¨‹é€»è¾‘å¤æ‚ï¼Œæ›¿æ¢UIæ—¶éœ€è¦è°¨æ…

#### æˆ‘çš„è®¢å• (`pages/orders/orders`)
- âœ… è®¢å•åˆ—è¡¨ï¼šä¿ç•™è®¢å•æ•°æ®ç»‘å®š
- âœ… è®¢å•çŠ¶æ€ï¼šä¿ç•™çŠ¶æ€æ˜¾ç¤ºé€»è¾‘
- âœ… æ ¸é”€æŒ‰é’®ï¼šä¿ç•™æ˜¾ç¤ºæ¡ä»¶é€»è¾‘

#### è®¢å•è¯¦æƒ… (`pages/order-detail/order-detail`)
- âœ… è®¢å•ä¿¡æ¯ï¼šä¿ç•™è®¢å•æ•°æ®ç»‘å®š
- âœ… å›¾ç‰‡ä¸Šä¼ ï¼šä¿ç•™ä¸Šä¼ é€»è¾‘
- âœ… æ ¸é”€äºŒç»´ç ï¼šä¿ç•™ç”Ÿæˆé€»è¾‘
- âœ… åˆ‡æ¢è®¢å•ç±»å‹ï¼šä¿ç•™åˆ‡æ¢é€»è¾‘

### 4.5 æ ·å¼æ›¿æ¢æ³¨æ„äº‹é¡¹

#### å•ä½è½¬æ¢
- **è®¾è®¡ç¨¿ä½¿ç”¨ `px`**ï¼šéœ€è¦è½¬æ¢ä¸º `rpx`
  - è½¬æ¢å…¬å¼ï¼š`rpx = px * 2`ï¼ˆåœ¨iPhone 6åŸºå‡†ä¸‹ï¼‰
  - ä¾‹å¦‚ï¼šè®¾è®¡ç¨¿ `375px` å®½åº¦ = `750rpx`

#### é¢œè‰²è§„èŒƒ
- å½“å‰ä¸»è‰²è°ƒï¼š`#FF6B6B`ï¼ˆçº¢è‰²ï¼‰
- å»ºè®®ï¼šåœ¨ `utils/design-tokens.js` ä¸­ç»Ÿä¸€ç®¡ç†é¢œè‰²å˜é‡

#### å­—ä½“å¤§å°
- å½“å‰ä½¿ç”¨ï¼š`rpx` å•ä½
- å»ºè®®ï¼šç»Ÿä¸€å­—ä½“å¤§å°è§„èŒƒï¼ˆæ ‡é¢˜ã€æ­£æ–‡ã€è¾…åŠ©æ–‡å­—ï¼‰

#### é—´è·è§„èŒƒ
- å½“å‰ä½¿ç”¨ï¼š`rpx` å•ä½
- å»ºè®®ï¼šç»Ÿä¸€é—´è·è§„èŒƒï¼ˆå¦‚ï¼š`20rpx`ã€`30rpx`ã€`40rpx`ï¼‰

### 4.6 æ›¿æ¢æ£€æŸ¥æ¸…å•

æ›¿æ¢UIåï¼Œéœ€è¦æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] é¡µé¢æ•°æ®æ­£å¸¸æ˜¾ç¤º
- [ ] ç‚¹å‡»äº‹ä»¶æ­£å¸¸è§¦å‘
- [ ] é¡µé¢è·³è½¬æ­£å¸¸
- [ ] æ¨¡æ€æ¡†æ˜¾ç¤º/éšè—æ­£å¸¸
- [ ] è¡¨å•æäº¤æ­£å¸¸
- [ ] å›¾ç‰‡åŠ è½½æ­£å¸¸
- [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤ºæ­£å¸¸
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸
- [ ] åœ¨ä¸åŒè®¾å¤‡ä¸Šæ˜¾ç¤ºæ­£å¸¸ï¼ˆrpxé€‚é…ï¼‰

---

## äº”ã€å»ºè®®çš„ä¼˜åŒ–æ–¹æ¡ˆ

### 5.1 ä»£ç ç»“æ„ä¼˜åŒ–

```
aistudio-å°ç¨‹åº/
â”œâ”€â”€ app.js                    # åº”ç”¨å…¥å£ï¼ˆå¯æ‹†åˆ†ï¼‰
â”œâ”€â”€ app.json                  # é¡µé¢é…ç½®
â”œâ”€â”€ config.js                 # ç¯å¢ƒé…ç½® âœ…
â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.js               # APIå°è£…ï¼ˆéœ€å®Œå–„ï¼‰âš ï¸
â”‚   â”œâ”€â”€ brand.js             # å“ç‰Œé…ç½® âœ…
â”‚   â”œâ”€â”€ design-tokens.js     # è®¾è®¡è§„èŒƒ âœ…
â”‚   â””â”€â”€ visitTracker.js      # è®¿é—®è¿½è¸ª âœ…
â”œâ”€â”€ components/               # å…¬å…±ç»„ä»¶ï¼ˆå»ºè®®æ–°å»ºï¼‰âš ï¸
â”‚   â”œâ”€â”€ navbar/              # å¯¼èˆªæ ç»„ä»¶
â”‚   â”œâ”€â”€ loading/             # åŠ è½½ç»„ä»¶
â”‚   â””â”€â”€ empty/               # ç©ºçŠ¶æ€ç»„ä»¶
â””â”€â”€ pages/                    # é¡µé¢ç›®å½•
    â”œâ”€â”€ index/               # é¦–é¡µ âœ…
    â”œâ”€â”€ style/               # é£æ ¼åº“ âœ…
    â”œâ”€â”€ product/             # äº§å“é¦† âœ…
    â”œâ”€â”€ cart/                # è´­ç‰©è½¦ âœ…
    â”œâ”€â”€ payment/             # æ”¯ä»˜é¡µé¢ âš ï¸ï¼ˆæ–‡ä»¶è¿‡å¤§ï¼‰
    â”œâ”€â”€ orders/              # è®¢å•åˆ—è¡¨ âœ…
    â””â”€â”€ ...
```

### 5.2 APIç»Ÿä¸€ç®¡ç†å»ºè®®

**å»ºè®®åˆ›å»ºï¼š** `utils/api-service.js`

```javascript
// ç»Ÿä¸€APIè°ƒç”¨å°è£…
class ApiService {
  // äº§å“ç›¸å…³
  getProductCategories() { ... }
  getProducts(categoryId, subcategoryId) { ... }
  getProductDetail(productId) { ... }
  
  // è®¢å•ç›¸å…³
  createOrder(orderData) { ... }
  getOrders(openid) { ... }
  getOrderDetail(orderNumber) { ... }
  updateOrderMode(orderId, orderMode) { ... }
  
  // é£æ ¼ç›¸å…³
  getStyles() { ... }
  
  // å…¶ä»–...
}
```

### 5.3 ç»„ä»¶åŒ–å»ºè®®

**å»ºè®®åˆ›å»ºä»¥ä¸‹å…¬å…±ç»„ä»¶ï¼š**

1. **å¯¼èˆªæ ç»„ä»¶** (`components/navbar/navbar`)
   - ç»Ÿä¸€å¯¼èˆªæ æ ·å¼å’Œé€»è¾‘
   - æ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜ã€è¿”å›æŒ‰é’®ã€å³ä¾§æŒ‰é’®

2. **åŠ è½½ç»„ä»¶** (`components/loading/loading`)
   - ç»Ÿä¸€åŠ è½½çŠ¶æ€æ˜¾ç¤º
   - æ”¯æŒè‡ªå®šä¹‰æ–‡æœ¬

3. **ç©ºçŠ¶æ€ç»„ä»¶** (`components/empty/empty`)
   - ç»Ÿä¸€ç©ºçŠ¶æ€æ˜¾ç¤º
   - æ”¯æŒè‡ªå®šä¹‰å›¾æ ‡ã€æ–‡æœ¬ã€æŒ‰é’®

4. **å•†å“å¡ç‰‡ç»„ä»¶** (`components/product-card/product-card`)
   - ç»Ÿä¸€å•†å“å¡ç‰‡æ ·å¼
   - æ”¯æŒä¸åŒåœºæ™¯ä½¿ç”¨

---

## å…­ã€å®Œæ•´é¡µé¢æ¸…å•

### 6.1 æ ¸å¿ƒä¸šåŠ¡é¡µé¢ï¼ˆå¿…é¡»ä¿ç•™ï¼‰

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½è¯´æ˜ | UIæ›¿æ¢ä¼˜å…ˆçº§ |
|---------|---------|---------|------------|
| `pages/index/index` | é¦–é¡µ | è½®æ’­å›¾ã€å¹¿å‘Šå¼¹çª—ã€ç«‹å³å®šåˆ¶ | â­â­â­ é«˜ |
| `pages/product/product` | äº§å“é¦† | ä¸€çº§/äºŒçº§åˆ†ç±»ã€äº§å“åˆ—è¡¨ | â­â­â­ é«˜ |
| `pages/product-detail/product-detail` | äº§å“è¯¦æƒ… | äº§å“ä¿¡æ¯ã€è§„æ ¼é€‰æ‹©ã€é£æ ¼é€‰æ‹© | â­â­â­ é«˜ |
| `pages/cart/cart` | è´­ç‰©è½¦ | å•†å“åˆ—è¡¨ã€åˆ†ç»„æ˜¾ç¤ºã€ç»“ç®— | â­â­â­ é«˜ |
| `pages/payment/payment` | æ”¯ä»˜é¡µé¢ | è®¢å•ç¡®è®¤ã€ä¼˜æƒ åˆ¸ã€æ”¯ä»˜ | â­â­â­ é«˜ |
| `pages/success/success` | è®¢å•æˆåŠŸ | è®¢å•ä¿¡æ¯ã€ç«‹å³æ‹æ‘„/ç«‹å³åˆ¶ä½œ | â­â­ ä¸­ |
| `pages/orders/orders` | æˆ‘çš„è®¢å• | è®¢å•åˆ—è¡¨ã€è®¢å•çŠ¶æ€ | â­â­â­ é«˜ |
| `pages/order-detail/order-detail` | è®¢å•è¯¦æƒ… | è®¢å•ä¿¡æ¯ã€å›¾ç‰‡ä¸Šä¼ ã€æ ¸é”€ | â­â­â­ é«˜ |
| `pages/mine/mine` | æˆ‘çš„ | ç”¨æˆ·ä¿¡æ¯ã€åŠŸèƒ½å…¥å£ | â­â­ ä¸­ |

### 6.2 ç™»å½•ç›¸å…³é¡µé¢

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½è¯´æ˜ | UIæ›¿æ¢ä¼˜å…ˆçº§ |
|---------|---------|---------|------------|
| `pages/login/login` | éšç§åè®® | é¦–æ¬¡ç™»å½•éšç§åè®®å¼¹çª— | â­â­ ä¸­ |
| `pages/auth-login/auth-login` | æˆæƒç™»å½• | å¾®ä¿¡æˆæƒç™»å½• | â­â­ ä¸­ |
| `pages/phone-login/phone-login` | æ‰‹æœºç™»å½• | æ‰‹æœºå·ç™»å½• | â­â­ ä¸­ |
| `pages/verify-code/verify-code` | éªŒè¯ç  | çŸ­ä¿¡éªŒè¯ç  | â­â­ ä¸­ |

### 6.3 é£æ ¼ç›¸å…³é¡µé¢

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½è¯´æ˜ | UIæ›¿æ¢ä¼˜å…ˆçº§ |
|---------|---------|---------|------------|
| `pages/style/style` | é£æ ¼åº“ | é£æ ¼åˆ†ç±»ã€é£æ ¼åˆ—è¡¨ | â­â­â­ é«˜ |
| `pages/style/style-detail/style-detail` | é£æ ¼è¯¦æƒ… | é£æ ¼è¯¦æƒ…ã€é£æ ¼å›¾ç‰‡ | â­â­ ä¸­ |

### 6.4 å…¶ä»–åŠŸèƒ½é¡µé¢

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½è¯´æ˜ | UIæ›¿æ¢ä¼˜å…ˆçº§ |
|---------|---------|---------|------------|
| `pages/order/qrcode` | æ ¸é”€äºŒç»´ç  | æ˜¾ç¤ºæ ¸é”€äºŒç»´ç  | â­â­ ä¸­ |
| `pages/digital-avatar/digital-avatar` | æ•°å­—åˆ†èº« | æ•°å­—åˆ†èº«åˆ—è¡¨ | â­ ä½ |
| `pages/coupons/coupons` | ä¼˜æƒ åˆ¸ | ä¼˜æƒ åˆ¸åˆ—è¡¨ | â­â­ ä¸­ |
| `pages/coupon-select/coupon-select` | é€‰æ‹©ä¼˜æƒ åˆ¸ | é€‰æ‹©ä¼˜æƒ åˆ¸ | â­â­ ä¸­ |
| `pages/coupon-claim/coupon-claim` | é¢†å–ä¼˜æƒ åˆ¸ | é¢†å–ä¼˜æƒ åˆ¸ | â­ ä½ |
| `pages/works/works` | ä½œå“åˆ—è¡¨ | ä½œå“å±•ç¤º | â­ ä½ |
| `pages/works-gallery/works-gallery` | ä½œå“ç”»å»Š | ä½œå“ç”»å»Š | â­ ä½ |
| `pages/cases/cases` | æ¡ˆä¾‹ | æ¡ˆä¾‹å±•ç¤º | â­ ä½ |
| `pages/promotion/promotion` | æ¨å¹¿ | æ¨å¹¿é¡µé¢ | â­ ä½ |
| `pages/shop/shop` | å•†åŸ | å•†åŸé¡µé¢ | â­ ä½ |
| `pages/shop-detail/shop-detail` | å•†åŸè¯¦æƒ… | å•†åŸè¯¦æƒ… | â­ ä½ |

### 6.5 å®šåˆ¶æµç¨‹é¡µé¢ï¼ˆå¯èƒ½éœ€è¦æ•´åˆï¼‰

| é¡µé¢è·¯å¾„ | é¡µé¢åç§° | åŠŸèƒ½è¯´æ˜ | UIæ›¿æ¢ä¼˜å…ˆçº§ |
|---------|---------|---------|------------|
| `pages/custom/select-style/select-style` | é€‰æ‹©é£æ ¼ | å®šåˆ¶æµç¨‹-é€‰æ‹©é£æ ¼ | â­ ä½ï¼ˆå¯èƒ½åºŸå¼ƒï¼‰ |
| `pages/custom/select-product/select-product` | é€‰æ‹©äº§å“ | å®šåˆ¶æµç¨‹-é€‰æ‹©äº§å“ | â­ ä½ï¼ˆå¯èƒ½åºŸå¼ƒï¼‰ |
| `pages/custom/upload-image/upload-image` | ä¸Šä¼ å›¾ç‰‡ | å®šåˆ¶æµç¨‹-ä¸Šä¼ å›¾ç‰‡ | â­ ä½ï¼ˆå¯èƒ½åºŸå¼ƒï¼‰ |
| `pages/custom/confirm-order/confirm-order` | ç¡®è®¤è®¢å• | å®šåˆ¶æµç¨‹-ç¡®è®¤è®¢å• | â­ ä½ï¼ˆå¯èƒ½åºŸå¼ƒï¼‰ |

**æ³¨æ„ï¼š** å®šåˆ¶æµç¨‹é¡µé¢å¯èƒ½å·²è¢«äº§å“è¯¦æƒ…é¡µæ›¿ä»£ï¼Œéœ€è¦ç¡®è®¤æ˜¯å¦è¿˜åœ¨ä½¿ç”¨ã€‚

---

## ä¸ƒã€APIæ¥å£è¯¦ç»†è¯´æ˜

### 7.1 äº§å“ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/catalog.py`

#### 1. è·å–äº§å“åˆ†ç±»
```javascript
// æ¥å£ï¼šGET /api/miniprogram/product-categories
// è°ƒç”¨ä½ç½®ï¼špages/product/product.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      id: 1,
      name: 'è¯ä»¶ç…§',
      code: 'idphoto',
      image_url: '...',
      subcategories: [
        {
          id: 1,
          name: 'å¥³',
          code: 'female',
          image_url: '...'
        }
      ]
    }
  ]
}
```

#### 2. è·å–äº§å“åˆ—è¡¨
```javascript
// æ¥å£ï¼šGET /api/miniprogram/products?category_id=1&subcategory_id=1
// è°ƒç”¨ä½ç½®ï¼špages/product/product.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      id: 1,
      name: 'è¯ä»¶ç…§',
      code: 'idphoto',
      description: '...',
      images: [...],
      sizes: [
        {
          id: 1,
          size_name: '1å¯¸',
          price: 60,
          effect_image_url: '...'  // å°ºå¯¸æ•ˆæœå›¾
        }
      ]
    }
  ]
}
```

#### 3. è·å–é£æ ¼åˆ†ç±»
```javascript
// æ¥å£ï¼šGET /api/miniprogram/styles
// è°ƒç”¨ä½ç½®ï¼špages/product-detail/product-detail.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      id: 1,
      name: 'è¯ä»¶ç…§é£æ ¼',
      images: [
        {
          id: 1,
          name: 'è¥¿è£…',
          image_url: '...',
          code: 'suit'
        }
      ]
    }
  ]
}
```

#### 4. è·å–é¦–é¡µè½®æ’­å›¾
```javascript
// æ¥å£ï¼šGET /api/miniprogram/banners
// è°ƒç”¨ä½ç½®ï¼špages/index/index.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      id: 1,
      title: 'æ´»åŠ¨æ ‡é¢˜',
      image_url: '...',
      link: '...',
      type: 'image'  // æˆ– 'photo_signup'
    }
  ]
}
```

### 7.2 è®¢å•ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/orders.py`

#### 1. åˆ›å»ºè®¢å•
```javascript
// æ¥å£ï¼šPOST /api/miniprogram/orders
// è°ƒç”¨ä½ç½®ï¼špages/payment/payment.js
// è¯·æ±‚æ•°æ®ï¼š
{
  orderId: 'PET...',
  customerName: '...',
  customerPhone: '...',
  totalPrice: '44.00',
  items: [...],
  orderMode: 'shooting'  // æˆ– 'making' æˆ– null
}
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  orderId: 'MP20260131...',
  message: 'è®¢å•åˆ›å»ºæˆåŠŸ'
}
```

#### 2. è·å–è®¢å•åˆ—è¡¨
```javascript
// æ¥å£ï¼šGET /api/miniprogram/orders?openid=...
// è°ƒç”¨ä½ç½®ï¼špages/orders/orders.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      orderId: 'MP20260131...',
      status: 'paid',
      statusText: 'å¾…æ‹æ‘„',
      orderMode: 'shooting',
      productName: '...',
      styleName: '...',
      totalPrice: '44.00',
      createTime: '2026-01-31 02:04',
      images: []
    }
  ]
}
```

#### 3. è·å–è®¢å•è¯¦æƒ…
```javascript
// æ¥å£ï¼šGET /api/miniprogram/order/<order_number>
// è°ƒç”¨ä½ç½®ï¼špages/order-detail/order-detail.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: {
    orderId: 'MP20260131...',
    status: 'paid',
    orderMode: 'shooting',
    items: [...],
    images: []
  }
}
```

#### 4. æ›´æ–°è®¢å•ç±»å‹
```javascript
// æ¥å£ï¼šPOST /api/miniprogram/orders/<order_id>/update-order-mode
// è°ƒç”¨ä½ç½®ï¼špages/payment/payment.js, pages/order-detail/order-detail.js
// è¯·æ±‚æ•°æ®ï¼š
{
  orderMode: 'shooting'  // æˆ– 'making'
}
```

#### 5. ç”Ÿæˆæ ¸é”€äºŒç»´ç 
```javascript
// æ¥å£ï¼šPOST /api/miniprogram/orders/<order_id>/generate-qrcode
// è°ƒç”¨ä½ç½®ï¼špages/order-detail/order-detail.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  qrcodeUrl: '...'
}
```

#### 6. ä¸Šä¼ è®¢å•å›¾ç‰‡
```javascript
// æ¥å£ï¼šPOST /api/miniprogram/order/upload
// è°ƒç”¨ä½ç½®ï¼špages/order-detail/order-detail.js
// è¯·æ±‚æ•°æ®ï¼šFormDataï¼ˆåŒ…å«å›¾ç‰‡æ–‡ä»¶ï¼‰
```

### 7.3 ç”¨æˆ·ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/user_api.py` æˆ–å…¶ä»–

#### 1. ç”¨æˆ·è®¿é—®è¿½è¸ª
```javascript
// æ¥å£ï¼šPOST /api/user/visit
// è°ƒç”¨ä½ç½®ï¼šutils/visitTracker.js
// è¯·æ±‚æ•°æ®ï¼š
{
  openid: '...',
  page: 'index',
  timestamp: 1234567890
}
```

### 7.4 ä¼˜æƒ åˆ¸ç›¸å…³æ¥å£

**æ–‡ä»¶ï¼š** `app/routes/miniprogram/promotion.py` æˆ–å…¶ä»–

#### 1. è·å–å¯ç”¨ä¼˜æƒ åˆ¸
```javascript
// æ¥å£ï¼šGET /api/miniprogram/coupons?userId=...
// è°ƒç”¨ä½ç½®ï¼špages/payment/payment.js
// è¿”å›æ•°æ®ï¼š
{
  status: 'success',
  data: [
    {
      id: 1,
      name: 'æ–°ç”¨æˆ·ä¼˜æƒ åˆ¸',
      discountAmount: 10,
      condition: 'æ»¡50å¯ç”¨'
    }
  ]
}
```

---

## å…«ã€æ€»ç»“

### âœ… ä¼˜ç‚¹
1. **é¡µé¢ç‹¬ç«‹æ‹†åˆ†**ï¼šæ‰€æœ‰æ ¸å¿ƒé¡µé¢éƒ½å·²ç‹¬ç«‹æ‹†åˆ†ï¼Œä¾¿äºUIæ›¿æ¢
2. **æ–‡ä»¶ç»“æ„æ¸…æ™°**ï¼šæ¯ä¸ªé¡µé¢éƒ½æœ‰ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤
3. **é…ç½®é›†ä¸­ç®¡ç†**ï¼šç¯å¢ƒé…ç½®ç»Ÿä¸€ç®¡ç†

### âš ï¸ éœ€è¦æ”¹è¿›
1. **ä»£ç å¤ç”¨æ€§**ï¼šéƒ¨åˆ†é€»è¾‘é‡å¤ï¼Œéœ€è¦æå–ä¸ºå…¬å…±ç»„ä»¶æˆ–å·¥å…·å‡½æ•°
2. **APIç®¡ç†**ï¼šAPIè°ƒç”¨åˆ†æ•£ï¼Œéœ€è¦ç»Ÿä¸€å°è£…
3. **æ–‡ä»¶è¿‡å¤§**ï¼šéƒ¨åˆ†æ–‡ä»¶ï¼ˆå¦‚ `payment.js`ï¼‰è¿‡å¤§ï¼Œéœ€è¦æ‹†åˆ†
4. **ç»„ä»¶åŒ–ä¸è¶³**ï¼šç¼ºå°‘å…¬å…±ç»„ä»¶ï¼Œå¯¼è‡´ä»£ç é‡å¤

### ğŸ“ UIæ›¿æ¢å»ºè®®
1. **æä¾›è®¾è®¡ç¨¿**ï¼šæ¨èä½¿ç”¨Figmaã€Sketchç­‰è®¾è®¡å·¥å…·
2. **ä¿æŒé€»è¾‘ä¸å˜**ï¼šæ›¿æ¢UIæ—¶åªä¿®æ”¹ `.wxml` å’Œ `.wxss`ï¼Œä¸ä¿®æ”¹ `.js` é€»è¾‘
3. **é€æ­¥æ›¿æ¢**ï¼šå»ºè®®å…ˆæ›¿æ¢ä¸€ä¸ªé¡µé¢æµ‹è¯•ï¼Œç¡®è®¤æµç¨‹åå†æ‰¹é‡æ›¿æ¢
4. **ä¿ç•™æ•°æ®ç»‘å®š**ï¼šæ‰€æœ‰ `{{}}`ã€`wx:if`ã€`wx:for` ç­‰å¿…é¡»ä¿ç•™

---

---

## ä¹ã€UIæ›¿æ¢å…·ä½“æ“ä½œæŒ‡å—

### 9.1 å¦‚æœæ‚¨æä¾›HTMLæ ¼å¼çš„é¡µé¢

#### è½¬æ¢è§„åˆ™

**1. HTMLæ ‡ç­¾ â†’ WXMLæ ‡ç­¾**
```html
<!-- HTML -->
<div class="container">
  <span>æ–‡æœ¬</span>
  <img src="image.jpg" alt="å›¾ç‰‡">
  <button onclick="handleClick()">æŒ‰é’®</button>
</div>

<!-- è½¬æ¢ä¸ºWXML -->
<view class="container">
  <text>æ–‡æœ¬</text>
  <image src="image.jpg" mode="aspectFill"></image>
  <button bindtap="handleClick">æŒ‰é’®</button>
</view>
```

**2. CSSå•ä½è½¬æ¢**
```css
/* CSS (è®¾è®¡ç¨¿) */
.container {
  width: 375px;
  padding: 20px;
  font-size: 16px;
}

/* è½¬æ¢ä¸ºWXSS */
.container {
  width: 750rpx;  /* px * 2 = rpx */
  padding: 40rpx;  /* px * 2 = rpx */
  font-size: 32rpx;  /* px * 2 = rpx */
}
```

**3. äº‹ä»¶ç»‘å®šè½¬æ¢**
```html
<!-- HTML -->
<button onclick="handleClick()">ç‚¹å‡»</button>
<input onchange="handleChange(event)">

<!-- è½¬æ¢ä¸ºWXML -->
<button bindtap="handleClick">ç‚¹å‡»</button>
<input bindchange="handleChange" data-value="{{value}}">
```

### 9.2 å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š

**åœ¨æ›¿æ¢UIæ—¶ï¼Œä»¥ä¸‹å†…å®¹å¿…é¡»ä¿ç•™ï¼š**

#### 1. æ•°æ®ç»‘å®š `{{}}`
```wxml
<!-- å¿…é¡»ä¿ç•™ -->
<text>{{productName}}</text>
<image src="{{productImage}}"></image>
```

#### 2. æ¡ä»¶æ¸²æŸ“ `wx:if`
```wxml
<!-- å¿…é¡»ä¿ç•™ -->
<view wx:if="{{showModal}}">å¼¹çª—å†…å®¹</view>
<view wx:else>å…¶ä»–å†…å®¹</view>
```

#### 3. åˆ—è¡¨æ¸²æŸ“ `wx:for`
```wxml
<!-- å¿…é¡»ä¿ç•™ -->
<view wx:for="{{items}}" wx:key="id">
  <text>{{item.name}}</text>
</view>
```

#### 4. äº‹ä»¶ç»‘å®š `bindtap`ã€`bindchange` ç­‰
```wxml
<!-- å¿…é¡»ä¿ç•™ -->
<button bindtap="handleClick">ç‚¹å‡»</button>
<input bindchange="handleChange">
```

### 9.3 å„é¡µé¢å…³é”®æ•°æ®ç»‘å®šæ¸…å•

#### é¦–é¡µ (`pages/index/index`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{brandName}}                    <!-- å“ç‰Œåç§° -->
{{carouselImages}}              <!-- è½®æ’­å›¾æ•°æ® -->
{{showAuthModal}}               <!-- æˆæƒå¼¹çª—æ˜¾ç¤ºçŠ¶æ€ -->
{{showActivityModal}}           <!-- å¹¿å‘Šå¼¹çª—æ˜¾ç¤ºçŠ¶æ€ -->
{{activityData}}                <!-- å¹¿å‘Šæ•°æ® -->
```

#### äº§å“é¦† (`pages/product/product`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{pageState}}                   <!-- é¡µé¢çŠ¶æ€ï¼š'categories' æˆ– 'products' -->
{{categories}}                  <!-- ä¸€çº§åˆ†ç±»åˆ—è¡¨ -->
{{subcategories}}              <!-- äºŒçº§åˆ†ç±»åˆ—è¡¨ -->
{{selectedCategoryId}}          <!-- é€‰ä¸­çš„ä¸€çº§åˆ†ç±»ID -->
{{selectedSubcategoryId}}       <!-- é€‰ä¸­çš„äºŒçº§åˆ†ç±»ID -->
{{filteredProducts}}            <!-- è¿‡æ»¤åçš„äº§å“åˆ—è¡¨ -->
{{loading}}                    <!-- åŠ è½½çŠ¶æ€ -->
```

#### äº§å“è¯¦æƒ…é¡µ (`pages/product-detail/product-detail`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{currentProduct}}              <!-- å½“å‰äº§å“ä¿¡æ¯ -->
{{sizeOptions}}                 <!-- å°ºå¯¸é€‰é¡¹ -->
{{selectedSize}}                <!-- é€‰ä¸­çš„å°ºå¯¸ -->
{{selectedColor}}               <!-- é€‰ä¸­çš„é¢œè‰² -->
{{allStyles}}                  <!-- æ‰€æœ‰é£æ ¼åˆ—è¡¨ -->
{{selectedStyle}}               <!-- é€‰ä¸­çš„é£æ ¼ -->
{{showSpecModal}}              <!-- è§„æ ¼é€‰æ‹©æ¨¡æ€æ¡†æ˜¾ç¤ºçŠ¶æ€ -->
{{pendingAction}}              <!-- å¾…æ‰§è¡Œçš„æ“ä½œï¼š'cart' æˆ– 'order' -->
```

#### è´­ç‰©è½¦ (`pages/cart/cart`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{groupedCartItems}}            <!-- æŒ‰äºŒçº§åˆ†ç±»åˆ†ç»„çš„å•†å“åˆ—è¡¨ -->
{{isAllSelected}}              <!-- æ˜¯å¦å…¨é€‰ -->
{{selectedTotalPrice}}          <!-- é€‰ä¸­å•†å“æ€»ä»· -->
{{selectedCount}}              <!-- é€‰ä¸­å•†å“æ•°é‡ -->
{{isEmpty}}                    <!-- æ˜¯å¦ä¸ºç©º -->
```

#### æ”¯ä»˜é¡µé¢ (`pages/payment/payment`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{orderInfo}}                   <!-- è®¢å•ä¿¡æ¯ -->
{{orderItems}}                  <!-- è®¢å•å•†å“åˆ—è¡¨ -->
{{isMultipleItems}}             <!-- æ˜¯å¦å¤šä¸ªå•†å“ -->
{{orderGroups}}                 <!-- è®¢å•åˆ†ç»„ï¼ˆå¤šä¸ªè®¢å•æ—¶ï¼‰ -->
{{selectedCoupon}}              <!-- é€‰ä¸­çš„ä¼˜æƒ åˆ¸ -->
{{finalAmount}}                <!-- æœ€ç»ˆé‡‘é¢ -->
{{showOrderModeModal}}          <!-- è®¢å•ç±»å‹é€‰æ‹©æ¨¡æ€æ¡† -->
{{selectedOrderMode}}           <!-- é€‰ä¸­çš„è®¢å•ç±»å‹ -->
```

#### æˆ‘çš„è®¢å• (`pages/orders/orders`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{orders}}                      <!-- è®¢å•åˆ—è¡¨ -->
{{item.status}}                 <!-- è®¢å•çŠ¶æ€ -->
{{item.statusText}}             <!-- è®¢å•çŠ¶æ€æ–‡æœ¬ -->
{{item.orderMode}}              <!-- è®¢å•ç±»å‹ -->
{{item.orderId}}                <!-- è®¢å•å· -->
```

#### è®¢å•è¯¦æƒ… (`pages/order-detail/order-detail`)
```wxml
<!-- å¿…é¡»ä¿ç•™çš„æ•°æ®ç»‘å®š -->
{{order}}                       <!-- è®¢å•ä¿¡æ¯ -->
{{order.status}}                <!-- è®¢å•çŠ¶æ€ -->
{{order.orderMode}}             <!-- è®¢å•ç±»å‹ -->
{{originalImages}}              <!-- åŸå§‹å›¾ç‰‡åˆ—è¡¨ -->
{{order.sizeEffectImage}}       <!-- å°ºå¯¸æ•ˆæœå›¾ -->
```

### 9.4 æ›¿æ¢æ­¥éª¤å»ºè®®

#### æ­¥éª¤1ï¼šå‡†å¤‡è®¾è®¡ç¨¿
1. æä¾›å®Œæ•´çš„è®¾è®¡ç¨¿ï¼ˆFigmaã€Sketchã€PSDç­‰ï¼‰
2. æ ‡æ³¨æ‰€æœ‰äº¤äº’å…ƒç´ ï¼ˆæŒ‰é’®ã€é“¾æ¥ã€è¾“å…¥æ¡†ç­‰ï¼‰
3. æä¾›è®¾è®¡è§„èŒƒï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ï¼‰

#### æ­¥éª¤2ï¼šé€ä¸ªé¡µé¢æ›¿æ¢
1. **å…ˆæ›¿æ¢ä¸€ä¸ªç®€å•é¡µé¢æµ‹è¯•**ï¼ˆå¦‚é¦–é¡µï¼‰
2. ç¡®è®¤æµç¨‹æ­£å¸¸åå†æ›¿æ¢å…¶ä»–é¡µé¢
3. æŒ‰ä¼˜å…ˆçº§æ›¿æ¢ï¼šæ ¸å¿ƒé¡µé¢ â†’ æ¬¡è¦é¡µé¢

#### æ­¥éª¤3ï¼šæ›¿æ¢æ—¶çš„å·¥ä½œæµç¨‹
1. **å¤‡ä»½åŸæ–‡ä»¶**ï¼ˆå»ºè®®ä½¿ç”¨Gitç‰ˆæœ¬æ§åˆ¶ï¼‰
2. **åªä¿®æ”¹ `.wxml` å’Œ `.wxss` æ–‡ä»¶**
3. **ä¸ä¿®æ”¹ `.js` æ–‡ä»¶**ï¼ˆé™¤ééœ€è¦è°ƒæ•´æ•°æ®ç»‘å®šï¼‰
4. **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**ï¼ˆç‚¹å‡»ã€è·³è½¬ã€æ•°æ®åŠ è½½ç­‰ï¼‰

#### æ­¥éª¤4ï¼šæµ‹è¯•æ£€æŸ¥
- [ ] é¡µé¢æ•°æ®æ­£å¸¸æ˜¾ç¤º
- [ ] æ‰€æœ‰æŒ‰é’®ç‚¹å‡»æ­£å¸¸
- [ ] é¡µé¢è·³è½¬æ­£å¸¸
- [ ] æ¨¡æ€æ¡†æ˜¾ç¤º/éšè—æ­£å¸¸
- [ ] è¡¨å•æäº¤æ­£å¸¸
- [ ] å›¾ç‰‡åŠ è½½æ­£å¸¸
- [ ] åœ¨ä¸åŒè®¾å¤‡ä¸Šæ˜¾ç¤ºæ­£å¸¸

### 9.5 å¸¸è§é—®é¢˜å¤„ç†

#### Q1: è®¾è®¡ç¨¿æ˜¯HTMLæ ¼å¼ï¼Œå¯ä»¥ç›´æ¥ç”¨å—ï¼Ÿ
**A:** ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦è½¬æ¢ï¼š
- HTMLæ ‡ç­¾éœ€è¦è½¬æ¢ä¸ºWXMLæ ‡ç­¾
- CSSéœ€è¦è½¬æ¢ä¸ºWXSS
- äº‹ä»¶ç»‘å®šéœ€è¦æ”¹ä¸ºå°ç¨‹åºæ ¼å¼
- å»ºè®®ï¼šæä¾›è®¾è®¡ç¨¿å›¾ç‰‡ï¼Œæˆ‘æ¥å¸®æ‚¨è½¬æ¢ä¸ºWXML

#### Q2: æ›¿æ¢UIååŠŸèƒ½ä¸å·¥ä½œäº†ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ•°æ®ç»‘å®š `{{}}` æ˜¯å¦ä¿ç•™
2. äº‹ä»¶ç»‘å®š `bindtap` ç­‰æ˜¯å¦ä¿ç•™
3. æ¡ä»¶æ¸²æŸ“ `wx:if`ã€`wx:for` æ˜¯å¦ä¿ç•™
4. JSæ–‡ä»¶ä¸­çš„å‡½æ•°åæ˜¯å¦åŒ¹é…

#### Q3: æ ·å¼æ˜¾ç¤ºä¸å¯¹ï¼Ÿ
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å•ä½æ˜¯å¦æ­£ç¡®è½¬æ¢ï¼ˆpx â†’ rpxï¼‰
2. å°ç¨‹åºç‰¹æœ‰çš„æ ·å¼å±æ€§ï¼ˆå¦‚ `rpx`ã€`flex`ï¼‰
3. å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®
4. å­—ä½“ã€é¢œè‰²æ˜¯å¦ä½¿ç”¨è®¾è®¡è§„èŒƒ

#### Q4: å¦‚ä½•å¿«é€Ÿæ›¿æ¢å¤šä¸ªé¡µé¢ï¼Ÿ
**A:** å»ºè®®ï¼š
1. å…ˆåˆ›å»ºä¸€ä¸ªé¡µé¢æ¨¡æ¿
2. æå–å…¬å…±æ ·å¼åˆ° `app.wxss`
3. åˆ›å»ºå…¬å…±ç»„ä»¶ï¼ˆå¯¼èˆªæ ã€æŒ‰é’®ç­‰ï¼‰
4. é€ä¸ªé¡µé¢æ›¿æ¢å¹¶æµ‹è¯•

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2026-01-31
**ç‰ˆæœ¬ï¼š** v1.0
