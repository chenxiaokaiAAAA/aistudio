# ç»Ÿä¸€é…ç½®ä¸­å¿ƒè¯´æ˜

## ğŸ“ é…ç½®ä½ç½®

**åªéœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶å³å¯åˆ‡æ¢æ‰€æœ‰åœ°å€ï¼**

### 1. åç«¯é…ç½®ï¼š`AI-studio/server_config.py`

è¿™æ˜¯**åç«¯å”¯ä¸€çš„é…ç½®æº**ï¼Œä¿®æ”¹è¿™é‡Œä¼šå½±å“ï¼š
- âœ… åç«¯APIè¿”å›çš„æ‰€æœ‰URL
- âœ… ç®¡ç†åå°é¡µé¢æ˜¾ç¤ºçš„åœ°å€ï¼ˆé€šè¿‡Flask contextæ³¨å…¥ï¼‰
- âœ… è®¢å•ä¿¡æ¯ä¸­çš„ç³»ç»Ÿåœ°å€
- âœ… äºŒç»´ç ä¸­çš„é“¾æ¥åœ°å€
- âœ… æ”¯ä»˜å›è°ƒåœ°å€
- âœ… æ‰€æœ‰å›¾ç‰‡URLç”Ÿæˆ

### 2. å‰ç«¯é…ç½®ï¼š`AI-å°ç¨‹åº/config.js`

è¿™æ˜¯**å°ç¨‹åºå”¯ä¸€çš„é…ç½®æº**ï¼Œä¿®æ”¹è¿™é‡Œä¼šå½±å“ï¼š
- âœ… å°ç¨‹åºæ‰€æœ‰APIè¯·æ±‚
- âœ… å°ç¨‹åºå›¾ç‰‡åŠ è½½åœ°å€
- âœ… å°ç¨‹åºé™æ€èµ„æºåœ°å€
- âœ… æ‰€æœ‰é¡µé¢æ–‡ä»¶çš„ç½‘ç»œè¯·æ±‚

## ğŸ”§ å¦‚ä½•ä¿®æ”¹

### åˆ‡æ¢åˆ°æœ¬åœ°ç¯å¢ƒï¼ˆå¼€å‘è°ƒè¯•ï¼‰

**åç«¯ï¼š** ä¿®æ”¹ `AI-studio/server_config.py`
```python
ENV = 'local'  # æ”¹ä¸º 'local'
```

**å‰ç«¯ï¼š** ä¿®æ”¹ `AI-å°ç¨‹åº/config.js`
```javascript
const ENV = 'local';  // æ”¹ä¸º 'local'
```

### åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆä¸Šçº¿ï¼‰

**åç«¯ï¼š** ä¿®æ”¹ `AI-studio/server_config.py`
```python
ENV = 'production'  # æ”¹ä¸º 'production'
```

**å‰ç«¯ï¼š** ä¿®æ”¹ `AI-å°ç¨‹åº/config.js`
```javascript
const ENV = 'production';  // æ”¹ä¸º 'production'
```

## ğŸ“ é…ç½®é¡¹è¯´æ˜

### åç«¯é…ç½®ï¼ˆserver_config.pyï¼‰

```python
SERVER_CONFIG = {
    'local': {
        'base_url': 'http://192.168.2.54:8000',      # åŸºç¡€URL
        'api_base_url': 'http://192.168.2.54:8000/api',  # APIåŸºç¡€URL
        'static_url': 'http://192.168.2.54:8000/static',  # é™æ€èµ„æºURL
        'media_url': 'http://192.168.2.54:8000/media',    # åª’ä½“æ–‡ä»¶URL
        'notify_url': 'http://192.168.2.54:8000/api/payment/notify'  # æ”¯ä»˜å›è°ƒURL
    },
    'production': {
        'base_url': 'https://moeart.cc',
        'api_base_url': 'https://moeart.cc/api',
        'static_url': 'https://moeart.cc/static',
        'media_url': 'https://moeart.cc/media',
        'notify_url': 'https://moeart.cc/api/payment/notify'
    }
}
```

### å‰ç«¯é…ç½®ï¼ˆconfig.jsï¼‰

```javascript
const SERVER_CONFIG = {
  local: {
    baseUrl: 'http://192.168.2.54:8000',
    apiBaseUrl: 'http://192.168.2.54:8000/api/miniprogram',
    apiUrl: 'http://192.168.2.54:8000/api',
    staticUrl: 'http://192.168.2.54:8000/static',
    mediaUrl: 'http://192.168.2.54:8000/media'
  },
  production: {
    baseUrl: 'https://moeart.cc',
    apiBaseUrl: 'https://moeart.cc/api/miniprogram',
    apiUrl: 'https://moeart.cc/api',
    staticUrl: 'https://moeart.cc/static',
    mediaUrl: 'https://moeart.cc/media'
  }
};
```

## ğŸš€ å¿«é€Ÿåˆ‡æ¢è„šæœ¬

### åç«¯åˆ‡æ¢è„šæœ¬

**åˆ‡æ¢åˆ°æœ¬åœ°ï¼š**
```bash
cd AI-studio
switch_env_local.bat
```

**åˆ‡æ¢åˆ°ç”Ÿäº§ï¼š**
```bash
cd AI-studio
switch_env_production.bat
```

### å‰ç«¯åˆ‡æ¢è„šæœ¬

**åˆ‡æ¢åˆ°æœ¬åœ°ï¼š**
```bash
cd AI-å°ç¨‹åº
switch_to_local.bat
```

**åˆ‡æ¢åˆ°ç”Ÿäº§ï¼š**
```bash
cd AI-å°ç¨‹åº
switch_to_production.bat
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯æœåŠ¡**
   - åç«¯ï¼šé‡å¯ Flask æœåŠ¡
   - å‰ç«¯ï¼šæ¸…é™¤ç¼“å­˜å¹¶é‡æ–°ç¼–è¯‘å°ç¨‹åº

2. **ç¡®ä¿ä¸¤ä¸ªé…ç½®æ–‡ä»¶çš„ç¯å¢ƒä¸€è‡´**
   - åç«¯å’Œå‰ç«¯åº”è¯¥ä½¿ç”¨ç›¸åŒçš„ç¯å¢ƒï¼ˆéƒ½æ˜¯ local æˆ–éƒ½æ˜¯ productionï¼‰

3. **ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•**
   - [ ] åç«¯ ENV = 'production'
   - [ ] å‰ç«¯ ENV = 'production'
   - [ ] å¾®ä¿¡æ”¯ä»˜å›è°ƒåœ°å€æ­£ç¡®
   - [ ] å°ç¨‹åºåŸŸåé…ç½®æ­£ç¡®
   - [ ] SSLè¯ä¹¦æœ‰æ•ˆ

## ğŸ“‹ é…ç½®å½±å“èŒƒå›´

### åç«¯é…ç½®å½±å“ï¼š
- âœ… test_server.py ä¸­æ‰€æœ‰URLç”Ÿæˆ
- âœ… ç®¡ç†åå°æ¨¡æ¿ä¸­çš„åœ°å€ï¼ˆé€šè¿‡Flask context processorè‡ªåŠ¨æ³¨å…¥ï¼‰
  - æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ï¼š`{{ server_base_url }}`ã€`{{ server_media_url }}`ã€`{{ server_static_url }}` ç­‰
- âœ… APIè¿”å›çš„å›¾ç‰‡URL
- âœ… è®¢å•ä¿¡æ¯ä¸­çš„ç³»ç»Ÿåœ°å€
- âœ… äºŒç»´ç é“¾æ¥
- âœ… æ”¯ä»˜å›è°ƒåœ°å€

### å‰ç«¯é…ç½®å½±å“ï¼š
- âœ… æ‰€æœ‰é¡µé¢æ–‡ä»¶çš„APIè¯·æ±‚
- âœ… å›¾ç‰‡åŠ è½½åœ°å€
- âœ… é™æ€èµ„æºåœ°å€
- âœ… åª’ä½“æ–‡ä»¶åœ°å€
