# 直接打包整个文件夹

## 📦 最简单的方法

### 方法1：使用 WinRAR 或 7-Zip（推荐）

1. **在文件资源管理器中**
   - 进入 `E:\AI-STUDIO\aistudio`
   - 选中整个 `aistudio` 文件夹
   - 右键 → **"添加到压缩文件"** 或 **"7-Zip" → "添加到压缩包"**

2. **排除不需要的文件**
   - 排除 `instance\*.db`（数据库文件，稍后单独上传）
   - 排除 `uploads\`、`final_works\`、`hd_images\`（图片文件，稍后单独上传）
   - 排除 `venv\`（虚拟环境，服务器上会重新创建）
   - 排除 `__pycache__\`、`*.pyc`（Python缓存）
   - 排除 `.git\`（Git目录）
   - 排除 `logs\`（日志文件）

3. **创建压缩包**
   - 压缩格式：ZIP
   - 文件名：`aistudio_full.zip`

### 方法2：使用 PowerShell（快速）

在 PowerShell 中执行：

```powershell
cd E:\AI-STUDIO
Compress-Archive -Path aistudio\* -DestinationPath aistudio_full.zip -Force
```

**注意**：这会包含所有文件，包括大文件。如果文件很大，建议使用方法1排除不需要的文件。

### 方法3：手动选择文件打包

1. 在 `E:\AI-STUDIO\aistudio` 中
2. 按住 `Ctrl`，选择以下文件夹和文件：
   - `app`
   - `templates`
   - `static`
   - `config`
   - `docs`
   - `scripts`
   - `workflows`
   - 所有 `.py` 文件
   - `requirements.txt`
   - `gunicorn.conf.py`
   - `start_production.py`
   - `.gitignore`
   - `README.md`
3. 右键 → **"添加到压缩文件"**

---

## 📤 上传到服务器

### 使用 WinSCP

1. 打开 WinSCP
2. 连接到：`root@121.43.143.59`
3. 导航到：`/root/project_code/`
4. 上传压缩包：`aistudio_full.zip`

---

## 🔧 服务器上解压

```bash
# 1. 备份当前项目（可选）
cd /root
mv project_code project_code_backup_$(date +%Y%m%d_%H%M%S)
mkdir -p project_code
cd project_code

# 2. 解压
unzip -o aistudio_full.zip

# 3. 恢复数据库（如果备份了）
if [ -d /root/project_code_backup_*/instance ]; then
    cp -r /root/project_code_backup_*/instance /root/project_code/
    echo "✅ 数据库已恢复"
fi

# 4. 设置权限
chmod +x /root/project_code/start_production.py
chmod 755 /root/project_code/instance 2>/dev/null || true

# 5. 重启服务
systemctl restart aistudio
systemctl status aistudio
```

---

## ✅ 推荐流程

1. **本地**：直接右键打包整个文件夹（排除大文件）
2. **本地**：使用 WinSCP 上传压缩包
3. **服务器**：解压并恢复数据库
4. **服务器**：重启服务

---

## 📝 注意事项

- **数据库文件**：`instance/pet_painting.db` 需要单独上传或从备份恢复
- **图片文件**：`uploads/`、`final_works/`、`hd_images/` 需要单独上传
- **虚拟环境**：服务器上会重新创建，不需要上传 `venv/`
