# ä¿®å¤åæœåŠ¡æ— æ³•è®¿é—®é—®é¢˜

## ğŸ” ç«‹å³æ£€æŸ¥

### æ­¥éª¤1ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status aistudio --no-pager -l | head -30

# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 8000

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep gunicorn | grep -v grep
```

### æ­¥éª¤2ï¼šæŸ¥çœ‹é”™è¯¯æ—¥å¿—

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
journalctl -u aistudio -n 50 --no-pager

# æŸ¥çœ‹åº”ç”¨é”™è¯¯æ—¥å¿—
tail -50 /root/project_code/logs/error.log 2>/dev/null || echo "error.logä¸å­˜åœ¨"

# æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—
tail -20 /var/log/nginx/error.log
```

### æ­¥éª¤3ï¼šæµ‹è¯•è®¿é—®

```bash
# æµ‹è¯•æœ¬åœ°è®¿é—®
curl -v http://localhost:8000/login 2>&1 | head -20

# æµ‹è¯• Nginx è®¿é—®
curl -v http://121.43.143.59/login 2>&1 | head -20
```

---

## ğŸ“‹ å®Œæ•´æ’æŸ¥å‘½ä»¤

```bash
echo "=== 1. æœåŠ¡çŠ¶æ€ ==="
systemctl status aistudio --no-pager -l | head -20

echo ""
echo "=== 2. ç«¯å£ç›‘å¬ ==="
netstat -tlnp | grep 8000 || echo "âš ï¸ 8000ç«¯å£æœªç›‘å¬"

echo ""
echo "=== 3. è¿›ç¨‹æ£€æŸ¥ ==="
ps aux | grep gunicorn | grep -v grep || echo "âš ï¸ Gunicornè¿›ç¨‹æœªè¿è¡Œ"

echo ""
echo "=== 4. æœåŠ¡æ—¥å¿—ï¼ˆæœ€è¿‘30è¡Œï¼‰ ==="
journalctl -u aistudio -n 30 --no-pager

echo ""
echo "=== 5. åº”ç”¨é”™è¯¯æ—¥å¿— ==="
tail -30 /root/project_code/logs/error.log 2>/dev/null || echo "error.logä¸å­˜åœ¨"

echo ""
echo "=== 6. Nginx é”™è¯¯æ—¥å¿— ==="
tail -10 /var/log/nginx/error.log

echo ""
echo "=== 7. æµ‹è¯•æœ¬åœ°è®¿é—® ==="
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://localhost:8000/login

echo ""
echo "=== 8. æµ‹è¯• Nginx è®¿é—® ==="
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://121.43.143.59/login
```

---

## ğŸš¨ å¯èƒ½çš„é—®é¢˜

### é—®é¢˜1ï¼šæœåŠ¡å´©æºƒ

å¦‚æœæœåŠ¡çŠ¶æ€æ˜¾ç¤º `failed` æˆ– `inactive`ï¼Œéœ€è¦é‡å¯ï¼š

```bash
systemctl restart aistudio
systemctl status aistudio
```

### é—®é¢˜2ï¼šæ•°æ®åº“è¿æ¥é—®é¢˜

å¦‚æœæ—¥å¿—æ˜¾ç¤ºæ•°æ®åº“é”™è¯¯ï¼Œæ£€æŸ¥æ•°æ®åº“æ–‡ä»¶ï¼š

```bash
ls -lh /root/project_code/instance/pet_painting.db
```

### é—®é¢˜3ï¼šPython æ¨¡å—å¯¼å…¥é”™è¯¯

å¦‚æœæ—¥å¿—æ˜¾ç¤º `ModuleNotFoundError`ï¼Œæ£€æŸ¥è™šæ‹Ÿç¯å¢ƒï¼š

```bash
cd /root/project_code
source venv/bin/activate
pip list | grep flask
```

---

## ğŸ”§ å¿«é€Ÿä¿®å¤

```bash
# 1. é‡å¯æœåŠ¡
systemctl restart aistudio
sleep 3

# 2. æ£€æŸ¥çŠ¶æ€
systemctl status aistudio --no-pager -l | head -20

# 3. å¦‚æœå¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿—
journalctl -u aistudio -n 50 --no-pager | tail -20
```

---

## ğŸ¯ ç«‹å³æ‰§è¡Œ

å…ˆæ‰§è¡Œä¸Šé¢çš„**å®Œæ•´æ’æŸ¥å‘½ä»¤**ï¼ŒæŠŠè¾“å‡ºå‘ç»™æˆ‘ï¼Œç‰¹åˆ«æ˜¯ï¼š
1. æœåŠ¡çŠ¶æ€
2. é”™è¯¯æ—¥å¿—
3. ç«¯å£ç›‘å¬æƒ…å†µ

è¿™æ ·æˆ‘å¯ä»¥å‡†ç¡®å®šä½é—®é¢˜ã€‚
