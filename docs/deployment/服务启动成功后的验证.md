# æœåŠ¡å¯åŠ¨æˆåŠŸåçš„éªŒè¯

## âœ… æ‰‹åŠ¨å¯åŠ¨æˆåŠŸ

ä»è¾“å‡ºçœ‹ï¼š
- âœ… Gunicornå¯åŠ¨æˆåŠŸ
- âœ… æ‰€æœ‰è“å›¾å·²æ³¨å†Œ
- âš ï¸ åªæœ‰ä¸€äº›å¯é€‰æ¨¡å—çš„è­¦å‘Šï¼ˆä¸å½±å“ä¸»è¦åŠŸèƒ½ï¼‰

---

## ğŸ”§ é‡å¯æœåŠ¡å¹¶éªŒè¯

### æ­¥éª¤1ï¼šé‡å¯æœåŠ¡

```bash
# é‡å¯æœåŠ¡
systemctl restart aistudio
sleep 3

# æŸ¥çœ‹çŠ¶æ€
systemctl status aistudio --no-pager -l | head -25
```

### æ­¥éª¤2ï¼šéªŒè¯æœåŠ¡

```bash
# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 8000

# æµ‹è¯•æœ¬åœ°è®¿é—®
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://localhost:8000/login

# æµ‹è¯• Nginx è®¿é—®
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://121.43.143.59/login
```

### æ­¥éª¤3ï¼šé‡ç½®å¯†ç ï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
cd /root/project_code
source venv/bin/activate

python << 'PYEOF'
from test_server import app, db, User
from werkzeug.security import generate_password_hash

with app.app_context():
    admin = User.query.filter_by(username='admin').first()
    if admin:
        admin.password = generate_password_hash('admin123')
        db.session.commit()
        print("âœ… ç®¡ç†å‘˜å¯†ç å·²é‡ç½®ä¸º: admin123")
    else:
        admin = User(
            username='admin',
            password=generate_password_hash('admin123'),
            role='admin'
        )
        db.session.add(admin)
        db.session.commit()
        print("âœ… ç®¡ç†å‘˜è´¦å·å·²åˆ›å»º: admin/admin123")
PYEOF
```

---

## ğŸ“‹ å®Œæ•´éªŒè¯è„šæœ¬

```bash
#!/bin/bash
echo "=========================================="
echo "é‡å¯æœåŠ¡å¹¶éªŒè¯"
echo "=========================================="
echo ""

# 1. é‡å¯æœåŠ¡
echo "[1/4] é‡å¯æœåŠ¡..."
systemctl restart aistudio
sleep 3
echo "âœ… æœåŠ¡å·²é‡å¯"
echo ""

# 2. æŸ¥çœ‹çŠ¶æ€
echo "[2/4] æŸ¥çœ‹æœåŠ¡çŠ¶æ€..."
systemctl status aistudio --no-pager -l | head -25

echo ""
# 3. æ£€æŸ¥ç«¯å£
echo "[3/4] æ£€æŸ¥ç«¯å£..."
netstat -tlnp | grep 8000 || echo "âš ï¸ ç«¯å£æœªç›‘å¬ï¼Œç­‰å¾…å‡ ç§’åé‡è¯•"

echo ""
# 4. æµ‹è¯•è®¿é—®
echo "[4/4] æµ‹è¯•è®¿é—®..."
echo "æœ¬åœ°è®¿é—®:"
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://localhost:8000/login

echo "Nginxè®¿é—®:"
curl -s -o /dev/null -w "HTTPçŠ¶æ€ç : %{http_code}\n" http://121.43.143.59/login

echo ""
echo "=========================================="
echo "éªŒè¯å®Œæˆï¼"
echo "=========================================="
echo ""
echo "å¦‚æœæœåŠ¡æ­£å¸¸ï¼Œç°åœ¨å¯ä»¥ï¼š"
echo "  1. æµè§ˆå™¨è®¿é—®: http://121.43.143.59/login"
echo "  2. ç™»å½•: admin / admin123"
echo ""
echo "å¦‚æœéœ€è¦é‡ç½®å¯†ç ï¼Œæ‰§è¡Œï¼š"
echo "  cd /root/project_code"
echo "  source venv/bin/activate"
echo "  python -c \"from test_server import app, db, User; from werkzeug.security import generate_password_hash; app.app_context().push(); admin = User.query.filter_by(username='admin').first(); admin.password = generate_password_hash('admin123'); db.session.commit(); print('å¯†ç å·²é‡ç½®')\""
```

---

## ğŸ¯ ç«‹å³æ‰§è¡Œ

æ‰§è¡Œä¸Šé¢çš„**å®Œæ•´éªŒè¯è„šæœ¬**ï¼Œå®ƒä¼šï¼š
1. é‡å¯æœåŠ¡
2. æŸ¥çœ‹çŠ¶æ€
3. æ£€æŸ¥ç«¯å£
4. æµ‹è¯•è®¿é—®

---

## âœ… å¦‚æœæœåŠ¡æ­£å¸¸

å¦‚æœçœ‹åˆ°ï¼š
- âœ… æœåŠ¡çŠ¶æ€ï¼š`active (running)`
- âœ… ç«¯å£8000æ­£åœ¨ç›‘å¬
- âœ… HTTPçŠ¶æ€ç ï¼š200

é‚£ä¹ˆæœåŠ¡å·²ç»æ­£å¸¸è¿è¡Œï¼

ç°åœ¨å¯ä»¥ï¼š
1. æµè§ˆå™¨è®¿é—®ï¼š`http://121.43.143.59/login`
2. ç™»å½•ï¼š`admin` / `admin123`ï¼ˆå¦‚æœå¯†ç ä¸å¯¹ï¼Œæ‰§è¡Œé‡ç½®å¯†ç å‘½ä»¤ï¼‰

---

## ğŸ“ æ‰§è¡Œå

æ‰§è¡ŒéªŒè¯è„šæœ¬åå‘Šè¯‰æˆ‘ç»“æœã€‚å¦‚æœæœåŠ¡æ­£å¸¸ï¼Œéƒ¨ç½²å°±å®Œæˆäº†ï¼
