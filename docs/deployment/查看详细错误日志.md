# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

## ğŸ” é—®é¢˜ç°è±¡

- âœ… `test_server.py` æ–‡ä»¶å·²å­˜åœ¨ï¼ˆ75KBï¼‰
- âœ… æœåŠ¡çŠ¶æ€æ˜¾ç¤º `active (running)`
- âŒ 8000 ç«¯å£æœªç›‘å¬
- âŒ `curl` è¿”å› HTTP 000ï¼ˆè¿æ¥å¤±è´¥ï¼‰

**è¯´æ˜**ï¼šè™½ç„¶ systemd è®¤ä¸ºæœåŠ¡åœ¨è¿è¡Œï¼Œä½† Gunicorn å®é™…ä¸Šæ²¡æœ‰æˆåŠŸå¯åŠ¨ã€‚

---

## ğŸ”§ ç«‹å³æ’æŸ¥

### æ­¥éª¤1ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—ï¼ˆæœ€è¿‘50è¡Œï¼‰
journalctl -u aistudio -n 50 --no-pager

# æŸ¥çœ‹åº”ç”¨é”™è¯¯æ—¥å¿—
tail -50 /root/project_code/logs/error.log 2>/dev/null || echo "error.logä¸å­˜åœ¨"

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
tail -50 /root/project_code/logs/startup.log 2>/dev/null || echo "startup.logä¸å­˜åœ¨"
```

### æ­¥éª¤2ï¼šæ‰‹åŠ¨æµ‹è¯•å¯åŠ¨ï¼ˆæŸ¥çœ‹å®æ—¶é”™è¯¯ï¼‰

```bash
# åœæ­¢æœåŠ¡
systemctl stop aistudio

# æ‰‹åŠ¨å¯åŠ¨ï¼ˆä¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼‰
cd /root/project_code
source venv/bin/activate
python start_production.py
```

**é‡è¦**ï¼šæ‰‹åŠ¨å¯åŠ¨ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œè¯·æŠŠè¾“å‡ºå‘ç»™æˆ‘ã€‚

---

## ğŸš¨ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šç¼ºå°‘ä¾èµ–æ¨¡å—

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ModuleNotFoundError: No module named 'xxx'
```

**è§£å†³**ï¼š
```bash
cd /root/project_code
source venv/bin/activate
pip install -r requirements.txt
```

### é—®é¢˜2ï¼šæ•°æ®åº“åˆå§‹åŒ–å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥: ...
```

**è§£å†³**ï¼š
```bash
# åˆ›å»ºinstanceç›®å½•
mkdir -p /root/project_code/instance
chmod 755 /root/project_code/instance
```

### é—®é¢˜3ï¼šGunicorn å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
gunicorn: error: ...
```

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥Gunicorné…ç½®
cat /root/project_code/gunicorn.conf.py

# æ£€æŸ¥Gunicornæ˜¯å¦å®‰è£…
cd /root/project_code
source venv/bin/activate
pip list | grep gunicorn
```

### é—®é¢˜4ï¼šæƒé™é—®é¢˜

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Permission denied
```

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /root/project_code/start_production.py
ls -la /root/project_code/test_server.py

# ç»™æ‰§è¡Œæƒé™
chmod +x /root/project_code/start_production.py
```

---

## ğŸ“‹ å®Œæ•´è¯Šæ–­å‘½ä»¤

```bash
echo "=== 1. æœåŠ¡æ—¥å¿— ==="
journalctl -u aistudio -n 50 --no-pager

echo ""
echo "=== 2. åº”ç”¨æ—¥å¿— ==="
ls -la /root/project_code/logs/ 2>/dev/null || echo "logsç›®å½•ä¸å­˜åœ¨"
tail -30 /root/project_code/logs/error.log 2>/dev/null || echo "error.logä¸å­˜åœ¨"
tail -30 /root/project_code/logs/startup.log 2>/dev/null || echo "startup.logä¸å­˜åœ¨"

echo ""
echo "=== 3. è¿›ç¨‹æ£€æŸ¥ ==="
ps aux | grep -E "python|gunicorn" | grep -v grep

echo ""
echo "=== 4. ä¾èµ–æ£€æŸ¥ ==="
cd /root/project_code
source venv/bin/activate
pip list | grep -E "gunicorn|flask|sqlalchemy"

echo ""
echo "=== 5. æ–‡ä»¶æ£€æŸ¥ ==="
ls -la /root/project_code/start_production.py
ls -la /root/project_code/test_server.py
ls -la /root/project_code/gunicorn.conf.py
```

---

## ğŸ¯ æ¨èæ“ä½œ

**ç«‹å³æ‰§è¡Œæ‰‹åŠ¨æµ‹è¯•å¯åŠ¨**ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°å®æ—¶é”™è¯¯ä¿¡æ¯ï¼š

```bash
# åœæ­¢æœåŠ¡
systemctl stop aistudio

# æ‰‹åŠ¨å¯åŠ¨
cd /root/project_code
source venv/bin/activate
python start_production.py
```

**æŠŠè¾“å‡ºå‘ç»™æˆ‘**ï¼Œæˆ‘ä¼šæ ¹æ®é”™è¯¯ä¿¡æ¯æä¾›å…·ä½“è§£å†³æ–¹æ¡ˆã€‚
