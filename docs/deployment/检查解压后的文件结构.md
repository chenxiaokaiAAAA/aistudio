# 检查解压后的文件结构

## 🔍 问题

- ❌ `start_production.py` 文件不存在
- 说明压缩包解压后文件结构可能不对

---

## 🔧 立即检查

### 步骤1：检查当前目录结构

```bash
# 查看项目根目录文件
ls -la /root/project_code/

# 查看是否有子目录
ls -la /root/project_code/*/

# 检查是否有 aistudio 子目录
ls -la /root/project_code/aistudio/ 2>/dev/null || echo "aistudio子目录不存在"
```

### 步骤2：查找 start_production.py

```bash
# 在整个目录中查找
find /root/project_code -name "start_production.py" -type f

# 查找所有 .py 文件
find /root/project_code -name "*.py" -type f | head -20
```

### 步骤3：检查压缩包内容

```bash
# 查看压缩包内容（不解压）
unzip -l /root/workspace/aistudio.zip | head -30

# 或查找压缩包位置
find /root -name "aistudio.zip" -type f
```

---

## 🔧 修复方案

### 方案1：如果文件在子目录中

如果解压后文件在 `aistudio/` 子目录中：

```bash
# 移动文件到正确位置
mv /root/project_code/aistudio/* /root/project_code/
rmdir /root/project_code/aistudio
```

### 方案2：重新解压到正确位置

```bash
# 清理
rm -rf /root/project_code/*
cd /root/project_code

# 重新解压（注意解压路径）
unzip -o /root/workspace/aistudio.zip

# 如果解压后有 aistudio 子目录，移动文件
if [ -d aistudio ]; then
    mv aistudio/* .
    rmdir aistudio
fi
```

---

## 📋 完整检查和修复脚本

```bash
#!/bin/bash
echo "=========================================="
echo "检查文件结构并修复"
echo "=========================================="
echo ""

# 1. 检查当前目录
echo "[1/4] 检查当前目录结构..."
echo "根目录文件："
ls -la /root/project_code/ | head -20

echo ""
echo "是否有 aistudio 子目录："
ls -la /root/project_code/aistudio/ 2>/dev/null || echo "无 aistudio 子目录"

echo ""
# 2. 查找关键文件
echo "[2/4] 查找关键文件..."
echo "查找 start_production.py:"
find /root/project_code -name "start_production.py" -type f

echo ""
echo "查找 test_server.py:"
find /root/project_code -name "test_server.py" -type f

echo ""
# 3. 检查压缩包
echo "[3/4] 检查压缩包内容..."
ZIP_FILE=$(find /root -name "aistudio.zip" -type f | head -1)
if [ -n "$ZIP_FILE" ]; then
    echo "压缩包位置: $ZIP_FILE"
    echo "压缩包内容（前30行）："
    unzip -l "$ZIP_FILE" | head -30
else
    echo "⚠️  未找到压缩包"
fi

echo ""
# 4. 修复（如果文件在子目录）
echo "[4/4] 修复文件结构..."
if [ -d /root/project_code/aistudio ]; then
    echo "发现 aistudio 子目录，移动文件..."
    mv /root/project_code/aistudio/* /root/project_code/ 2>/dev/null
    rmdir /root/project_code/aistudio 2>/dev/null
    echo "✅ 文件已移动"
else
    echo "无子目录，文件结构正常"
fi

echo ""
echo "=========================================="
echo "修复后检查："
echo "=========================================="
ls -la /root/project_code/*.py | head -10
```

---

## 🎯 立即执行

执行上面的**完整检查和修复脚本**，它会：
1. 检查当前目录结构
2. 查找关键文件
3. 检查压缩包内容
4. 修复文件结构（如果文件在子目录中）

执行后告诉我结果，特别是：
- 是否找到了 `start_production.py`
- 文件是否在子目录中
- 压缩包的内容结构

这样我可以提供准确的修复方案。
