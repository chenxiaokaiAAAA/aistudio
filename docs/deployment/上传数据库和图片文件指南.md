# ä¸Šä¼ æ•°æ®åº“å’Œå›¾ç‰‡æ–‡ä»¶æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

- âœ… **æœåŠ¡å·²å¯åŠ¨**ï¼š`aistudio` æœåŠ¡æ­£åœ¨è¿è¡Œ
- âš ï¸ **æ•°æ®åº“æœªä¸Šä¼ **ï¼šæœåŠ¡å™¨ä¸Šå¯èƒ½æ˜¯ç©ºæ•°æ®åº“
- âš ï¸ **å›¾ç‰‡æ–‡ä»¶æœªä¸Šä¼ **ï¼šå›¾ç‰‡ç›®å½•å¯èƒ½ä¸ºç©º

---

## ğŸ¯ æ¨èé¡ºåº

### **æ–¹æ¡ˆ1ï¼šå…ˆéªŒè¯æœåŠ¡ï¼Œå†ä¸Šä¼ æ•°æ®ï¼ˆæ¨èï¼‰**

**ä¼˜ç‚¹**ï¼š
- âœ… å…ˆç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œ
- âœ… å¦‚æœæœåŠ¡æœ‰é—®é¢˜ï¼Œä¸Šä¼ æ•°æ®ä¹Ÿæ²¡ç”¨
- âœ… å¯ä»¥é€æ­¥éªŒè¯æ¯ä¸ªæ­¥éª¤

**æ­¥éª¤**ï¼š
1. âœ… **éªŒè¯æœåŠ¡**ï¼ˆå·²å®Œæˆï¼‰
2. â¬‡ï¸ **ä¸Šä¼ æ•°æ®åº“æ–‡ä»¶**ï¼ˆéœ€è¦é‡å¯æœåŠ¡ï¼‰
3. â¬‡ï¸ **ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶**ï¼ˆä¸éœ€è¦é‡å¯ï¼‰

---

## ğŸ“¤ ä¸Šä¼ æ•°æ®åº“æ–‡ä»¶

### æ–¹æ³•1ï¼šä½¿ç”¨ PowerShell è„šæœ¬ï¼ˆæ¨èï¼‰

åœ¨**æœ¬åœ° Windows PowerShell** ä¸­æ‰§è¡Œï¼š

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd E:\AI-STUDIO\aistudio

# æ‰§è¡Œä¸Šä¼ è„šæœ¬
.\scripts\deployment\upload_to_aliyun.ps1
```

**æ³¨æ„**ï¼šéœ€è¦å…ˆé…ç½®å¯†é’¥æ–‡ä»¶è·¯å¾„ï¼Œè„šæœ¬ä¼šæç¤ºé€‰æ‹©ä¸Šä¼ å†…å®¹ã€‚

### æ–¹æ³•2ï¼šä½¿ç”¨ SCP å‘½ä»¤ï¼ˆæ‰‹åŠ¨ï¼‰

åœ¨**æœ¬åœ° PowerShell** ä¸­æ‰§è¡Œï¼š

```powershell
# ä¸Šä¼ æ•°æ®åº“æ–‡ä»¶
scp -i "E:\AI-STUDIO\aistudio\aliyun-key\your-key.pem" `
    "instance\pet_painting.db" `
    root@121.43.143.59:/root/project_code/instance/pet_painting.db
```

**æ›¿æ¢**ï¼š`your-key.pem` ä¸ºæ‚¨çš„å®é™…å¯†é’¥æ–‡ä»¶å

### æ–¹æ³•3ï¼šä½¿ç”¨ WinSCPï¼ˆå›¾å½¢ç•Œé¢ï¼‰

1. æ‰“å¼€ WinSCP
2. è¿æ¥åˆ°æœåŠ¡å™¨ï¼š`121.43.143.59`
3. å¯¼èˆªåˆ°ï¼š`/root/project_code/instance/`
4. å¦‚æœ `instance` ç›®å½•ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º
5. å°†æœ¬åœ°çš„ `instance/pet_painting.db` æ‹–æ‹½ä¸Šä¼ 

---

## ğŸ“¤ ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶

### å›¾ç‰‡æ–‡ä»¶ä½ç½®

**æœ¬åœ°ç›®å½•**ï¼š
- `uploads/` - ç”¨æˆ·ä¸Šä¼ çš„åŸå§‹å›¾ç‰‡
- `final_works/` - æœ€ç»ˆä½œå“
- `hd_images/` - é«˜æ¸…å›¾ç‰‡

**æœåŠ¡å™¨ç›®å½•**ï¼š
- `/root/project_data/user_images/uploads/`
- `/root/project_data/user_images/final_works/`
- `/root/project_data/user_images/hd_images/`

### æ–¹æ³•1ï¼šä½¿ç”¨ PowerShell è„šæœ¬ï¼ˆæ¨èï¼‰

è„šæœ¬ä¼šè‡ªåŠ¨å‹ç¼©å¹¶ä¸Šä¼ ï¼š

```powershell
.\scripts\deployment\upload_to_aliyun.ps1
```

é€‰æ‹©é€‰é¡¹ `2` æˆ– `3` ä¸Šä¼ å›¾ç‰‡ã€‚

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å‹ç¼©ä¸Šä¼ 

#### æ­¥éª¤1ï¼šåœ¨æœ¬åœ°å‹ç¼©

```powershell
# å‹ç¼©å›¾ç‰‡ç›®å½•
Compress-Archive -Path uploads -DestinationPath uploads.zip
Compress-Archive -Path final_works -DestinationPath final_works.zip
Compress-Archive -Path hd_images -DestinationPath hd_images.zip
```

#### æ­¥éª¤2ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

```powershell
# ä¸Šä¼ å‹ç¼©åŒ…
scp -i "E:\AI-STUDIO\aistudio\aliyun-key\your-key.pem" `
    uploads.zip root@121.43.143.59:/root/project_data/
    
scp -i "E:\AI-STUDIO\aistudio\aliyun-key\your-key.pem" `
    final_works.zip root@121.43.143.59:/root/project_data/
    
scp -i "E:\AI-STUDIO\aistudio\aliyun-key\your-key.pem" `
    hd_images.zip root@121.43.143.59:/root/project_data/
```

#### æ­¥éª¤3ï¼šåœ¨æœåŠ¡å™¨ä¸Šè§£å‹

åœ¨**æœåŠ¡å™¨ç»ˆç«¯**æ‰§è¡Œï¼š

```bash
# è¿›å…¥æ•°æ®ç›®å½•
cd /root/project_data

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p user_images/uploads
mkdir -p user_images/final_works
mkdir -p user_images/hd_images

# è§£å‹æ–‡ä»¶
unzip uploads.zip -d user_images/
unzip final_works.zip -d user_images/
unzip hd_images.zip -d user_images/

# æ¸…ç†å‹ç¼©åŒ…ï¼ˆå¯é€‰ï¼‰
rm uploads.zip final_works.zip hd_images.zip
```

---

## ğŸ”„ ä¸Šä¼ åçš„æ“ä½œ

### 1. ä¸Šä¼ æ•°æ®åº“åï¼ˆå¿…é¡»é‡å¯æœåŠ¡ï¼‰

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
systemctl restart aistudio

# éªŒè¯æœåŠ¡çŠ¶æ€
systemctl status aistudio
```

**åŸå› **ï¼šæ•°æ®åº“æ–‡ä»¶å·²æ›´æ¢ï¼Œéœ€è¦é‡å¯æœåŠ¡é‡æ–°åŠ è½½ã€‚

### 2. ä¸Šä¼ å›¾ç‰‡åï¼ˆä¸éœ€è¦é‡å¯ï¼‰

å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ åï¼Œ**ä¸éœ€è¦é‡å¯æœåŠ¡**ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ã€‚

---

## âœ… å®Œæ•´ä¸Šä¼ æµç¨‹

### æ­¥éª¤1ï¼šéªŒè¯æœåŠ¡ï¼ˆå·²å®Œæˆï¼‰

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
systemctl status aistudio
curl http://localhost:8000/admin/
```

### æ­¥éª¤2ï¼šä¸Šä¼ æ•°æ®åº“æ–‡ä»¶

**åœ¨æœ¬åœ°æ‰§è¡Œ**ï¼š
```powershell
.\scripts\deployment\upload_to_aliyun.ps1
# é€‰æ‹©é€‰é¡¹ 1ï¼šåªä¸Šä¼ æ•°æ®åº“æ–‡ä»¶
```

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š
```bash
# é‡å¯æœåŠ¡
systemctl restart aistudio

# éªŒè¯
systemctl status aistudio
```

### æ­¥éª¤3ï¼šä¸Šä¼ å›¾ç‰‡æ–‡ä»¶

**åœ¨æœ¬åœ°æ‰§è¡Œ**ï¼š
```powershell
.\scripts\deployment\upload_to_aliyun.ps1
# é€‰æ‹©é€‰é¡¹ 2ï¼šåªä¸Šä¼ å›¾ç‰‡æ–‡ä»¶
```

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼ˆå¦‚æœä½¿ç”¨å‹ç¼©åŒ…ä¸Šä¼ ï¼‰ï¼š
```bash
cd /root/project_data
mkdir -p user_images
unzip uploads.zip -d user_images/
unzip final_works.zip -d user_images/
unzip hd_images.zip -d user_images/
```

### æ­¥éª¤4ï¼šéªŒè¯ä¸Šä¼ ç»“æœ

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶
ls -lh /root/project_code/instance/pet_painting.db

# æ£€æŸ¥å›¾ç‰‡ç›®å½•
ls -lh /root/project_data/user_images/uploads/ | head -10
ls -lh /root/project_data/user_images/final_works/ | head -10
ls -lh /root/project_data/user_images/hd_images/ | head -10
```

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“æ–‡ä»¶

- âš ï¸ **ä¸Šä¼ å‰å¤‡ä»½**ï¼šå¦‚æœæœåŠ¡å™¨ä¸Šå·²æœ‰æ•°æ®åº“ï¼Œå…ˆå¤‡ä»½
- âš ï¸ **æƒé™é—®é¢˜**ï¼šç¡®ä¿æ–‡ä»¶æƒé™æ­£ç¡®
- âš ï¸ **å¿…é¡»é‡å¯**ï¼šä¸Šä¼ æ•°æ®åº“åå¿…é¡»é‡å¯æœåŠ¡

### 2. å›¾ç‰‡æ–‡ä»¶

- âš ï¸ **æ–‡ä»¶è¾ƒå¤§**ï¼šå›¾ç‰‡æ–‡ä»¶å¯èƒ½å¾ˆå¤§ï¼Œä¸Šä¼ éœ€è¦æ—¶é—´
- âš ï¸ **å‹ç¼©ä¸Šä¼ **ï¼šå»ºè®®å‹ç¼©åä¸Šä¼ ï¼ŒèŠ‚çœæ—¶é—´
- âš ï¸ **ç›®å½•ç»“æ„**ï¼šç¡®ä¿æœåŠ¡å™¨ä¸Šçš„ç›®å½•ç»“æ„ä¸é…ç½®ä¸€è‡´

### 3. æœåŠ¡çŠ¶æ€

- âœ… **ä¸Šä¼ æ•°æ®åº“å‰**ï¼šæœåŠ¡å¯ä»¥æ­£å¸¸è¿è¡Œï¼ˆä½¿ç”¨ç©ºæ•°æ®åº“ï¼‰
- âœ… **ä¸Šä¼ æ•°æ®åº“å**ï¼šéœ€è¦é‡å¯æœåŠ¡
- âœ… **ä¸Šä¼ å›¾ç‰‡å**ï¼šä¸éœ€è¦é‡å¯æœåŠ¡

---

## ğŸ” éªŒè¯ä¸Šä¼ æ˜¯å¦æˆåŠŸ

### æ£€æŸ¥æ•°æ®åº“

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /root/project_code
source venv/bin/activate
python -c "from test_server import app, db; app.app_context().push(); from app.models import User; print(f'ç”¨æˆ·æ•°é‡: {User.query.count()}')"
```

### æ£€æŸ¥å›¾ç‰‡

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
find /root/project_data/user_images -type f | wc -l
```

### æµè§ˆå™¨æµ‹è¯•

1. è®¿é—®ï¼š`http://121.43.143.59/admin/`
2. ç™»å½•åæŸ¥çœ‹æ˜¯å¦æœ‰æ•°æ®
3. æµ‹è¯•å›¾ç‰‡æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤º

---

## ğŸ“ æ€»ç»“

**æ¨èé¡ºåº**ï¼š
1. âœ… **å…ˆéªŒè¯æœåŠ¡**ï¼ˆå·²å®Œæˆï¼‰
2. â¬‡ï¸ **ä¸Šä¼ æ•°æ®åº“**ï¼ˆéœ€è¦é‡å¯æœåŠ¡ï¼‰
3. â¬‡ï¸ **ä¸Šä¼ å›¾ç‰‡**ï¼ˆä¸éœ€è¦é‡å¯ï¼‰

**åŸå› **ï¼š
- æœåŠ¡å·²ç»å¯åŠ¨ï¼Œè¯´æ˜åŸºæœ¬é…ç½®æ­£ç¡®
- å…ˆä¸Šä¼ æ•°æ®åº“ï¼Œç¡®ä¿ä¸šåŠ¡æ•°æ®å®Œæ•´
- æœ€åä¸Šä¼ å›¾ç‰‡ï¼Œè¡¥å……èµ„æºæ–‡ä»¶

ç°åœ¨å¯ä»¥å¼€å§‹ä¸Šä¼ æ–‡ä»¶äº†ï¼
